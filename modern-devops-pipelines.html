<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>A Modern DevOps Pipeline Cheatsheet</title>
    <link href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;ðŸš€&lt;/text&gt;&lt;/svg&gt;" rel="icon" />
    <!-- SEO & Metadata -->
    <meta content="A logically structured cheatsheet for modern DevOps pipelines, covering the lifecycle from SCM, CI, CD, to Monitoring. Compares Azure DevOps and GitHub Actions, with details on Terraform, Kubernetes, and security." name="description" />
    <meta content="DevOps, CI/CD, Cheatsheet, Azure DevOps, GitHub Actions, Terraform, Kubernetes, Jenkins, GitLab, IaC, SCM, Continuous Integration, Continuous Delivery, Monitoring" name="keywords" />
    <!-- Bootstrap CSS -->
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" rel="stylesheet" />
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet" />
    <style>
        :root {
            --bs-body-bg: #1a1d21;
            --bs-body-color: #e9ecef;
            --card-bg: #212529;
            --card-border-color: #495057;
            --card-shadow-color: rgba(0, 0, 0, 0.4);
            --text-color-main: #f8f9fa;
            --text-color-secondary: #adb5bd;
            --text-color-highlight: #78C1F3;
            --schema-bg-color: rgba(33, 37, 41, 0.7);
            --schema-border-color: #343a40;
            --blueprint-grid-color: rgba(108, 117, 125, 0.1);
            --devops-color-concepts: #6c757d;
            --devops-color-scm: #F05032;
            --devops-color-ci: #F7B601;
            --devops-color-cd: #32a852;
            --devops-color-iac: #7B42BC;
            --devops-color-security: #D73A49;
            --devops-color-monitoring: #28a745;
        }
        body { background-color: var(--bs-body-bg); background-image: linear-gradient(var(--blueprint-grid-color) 1px, transparent 1px), linear-gradient(to right, var(--blueprint-grid-color) 1px, transparent 1px); background-size: 50px 50px; font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif; }
        .page-header { background: linear-gradient(135deg, rgba(13, 110, 253, 0.1), rgba(110, 64, 201, 0.1)); padding: 3rem 1.5rem; text-align: center; border-bottom: 1px solid var(--schema-border-color); margin-bottom: 2rem; }
        .page-header h1 { color: #fff; font-weight: 300; font-size: 2.8rem; }
        .page-header .lead { color: var(--text-color-secondary); max-width: 800px; margin: auto; font-style: italic; }
        .section-title { color: var(--text-color-main); margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 1px solid var(--schema-border-color); }
        .info-card { background: var(--card-bg); border: 1px solid var(--card-border-color); border-radius: 6px; box-shadow: 0 4px 12px var(--card-shadow-color); height: 100%; display: flex; flex-direction: column; }
        .info-card h5 { color: #fff; background-color: var(--card-category-color); font-size: 1rem; text-align: center; margin: 0; padding: 0.7rem 0.5rem; font-weight: 600; display: flex; justify-content: center; align-items: center; gap: .5rem; border-bottom: 1px solid var(--card-border-color); border-radius: 5px 5px 0 0; }
        .info-card h5 .bi { font-size: 1.2em; }
        .card-content-wrapper { padding: 1rem; flex-grow: 1; display: flex; flex-direction: column; }
        .info-card p.summary { font-size: .9rem; color: var(--text-color-secondary); margin-bottom: 1rem; flex-grow: 1; line-height: 1.6; }
        .details-toggle { font-size: 0.8rem; margin-top: auto; align-self: flex-start; }
        .collapse-content { font-size: 0.9rem; border-top: 1px solid var(--card-border-color); padding: 1rem; background-color: #1a1d21; }
        .collapse-content h6 { font-weight: 700; color: var(--text-color-highlight); margin-top: 0.8rem; }
        .collapse-content code { display: block; white-space: pre-wrap; word-wrap: break-word; font-size: 0.85rem; color: #e83e8c; background-color: rgba(0, 0, 0, 0.3); padding: 0.8em; border-radius: 4px; }
        .card-concepts { --card-category-color: var(--devops-color-concepts); }
        .card-scm { --card-category-color: var(--devops-color-scm); }
        .card-ci { --card-category-color: var(--devops-color-ci); }
        .card-cd { --card-category-color: var(--devops-color-cd); }
        .card-iac { --card-category-color: var(--devops-color-iac); }
        .card-security { --card-category-color: var(--devops-color-security); }
        .card-monitoring { --card-category-color: var(--devops-color-monitoring); }
        footer { border-top: 1px solid var(--schema-border-color); padding-top: 2rem; margin-top: 2rem; color: var(--text-color-secondary); font-size: 0.9em; text-align:center; }
    </style>
</head>
<body>
    <header class="page-header">
        <h1><i class="bi bi-bezier"></i> A Modern DevOps Pipeline Cheatsheet</h1>
        <p class="lead">A logically structured, battle-hardened guide to the modern DevOps lifecycle, from source control to production monitoring.</p>
    </header>

    <main class="container">
        <!-- Preamble: Core Concepts -->
        <section class="mb-5">
            <h2 class="section-title">Preamble: Core Pipeline Concepts</h2>
            <div class="row g-4">
                <div class="col-lg-4">
                    <div class="info-card card-concepts">
                        <h5><i class="bi bi-hdd-rack"></i> Hosted vs. Self-Hosted Agents</h5>
                        <div class="card-content-wrapper">
                            <p class="summary">The fundamental choice of who manages the build machines. This decision impacts speed, cost, security, and maintenance overhead.</p>
                            <button class="btn btn-sm btn-outline-secondary details-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAgents">Details</button>
                        </div>
                        <div class="collapse collapse-content" id="collapseAgents">
                            <h6>Hosted (Microsoft/GitHub-Managed)</h6>
                            <p><strong>Pros:</strong> No maintenance, a fresh VM for every job, wide range of pre-installed software.<br/><strong>Cons:</strong> Slower startup, network restrictions, can be expensive at scale.</p>
                            <h6>Self-Hosted</h6>
                            <p><strong>Pros:</strong> Faster feedback, cheaper at scale, full control, direct access to private networks.<br/><strong>Cons:</strong> You own the maintenance, patching, security, and scaling.</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="info-card card-concepts">
                        <h5><i class="bi bi-fast-forward-circle"></i> Dependency Caching</h5>
                        <div class="card-content-wrapper">
                            <p class="summary">The easiest way to get a massive speed boost. Caching dependencies (NuGet, npm, etc.) between runs is critical for fast feedback loops.</p>
                             <button class="btn btn-sm btn-outline-secondary details-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCaching">Details</button>
                        </div>
                         <div class="collapse collapse-content" id="collapseCaching">
                            <h6>Azure Pipelines (`cache` task):</h6>
                            <code>- task: Cache@2
  inputs:
    key: 'nuget | "$(Agent.OS)" | **/packages.lock.json'
    path: '$(NUGET_PACKAGES)'</code>
                            <h6>GitHub Actions (`actions/cache`):</h6>
                            <code>- uses: actions/cache@v4
  with:
    path: ~/.nuget/packages
    key: ${{ runner.os }}-nuget-${{ hashFiles('**/packages.lock.json') }}</code>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="info-card card-concepts">
                        <h5><i class="bi bi-sign-split"></i> Deployment Strategies</h5>
                        <div class="card-content-wrapper">
                            <p class="summary">How to release code without causing outages. Use intelligent strategies to limit the blast radius of a bad deployment.</p>
                            <button class="btn btn-sm btn-outline-secondary details-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#collapseStrategies">Details</button>
                        </div>
                        <div class="collapse collapse-content" id="collapseStrategies">
                            <ul>
                                <li><strong>Immutable Infrastructure:</strong> Don't modify running servers. Replace them with fresh ones built from versioned artifacts to eliminate configuration drift.</li>
                                <li><strong>Blue/Green:</strong> Deploy to a parallel production environment ("Green"). Once verified, switch traffic from "Blue" to "Green" for instant rollback.</li>
                                <li><strong>Canary:</strong> Deploy to a small subset of users, monitor for errors, then gradually roll out to everyone.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Phase 1: SCM -->
        <section class="mb-5">
            <h2 class="section-title" style="color: var(--devops-color-scm);">Phase 1: Source Control Management (SCM)</h2>
            <div class="row g-4 justify-content-center">
                 <div class="col-lg-8">
                    <div class="info-card card-scm">
                        <h5><i class="bi bi-git"></i> Critical Practice: Branch Protection</h5>
                        <div class="card-content-wrapper">
                            <p class="summary">Everything starts with code. The SCM is your single source of truth. Protecting the `main` branch is the first and most important quality gate.</p>
                             <button class="btn btn-sm btn-outline-secondary details-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#collapseScm">Details</button>
                        </div>
                        <div class="collapse collapse-content" id="collapseScm">
                            <p>Use rules to enforce that no code merges into `main` without meeting specific criteria. This is non-negotiable for stable, high-quality software.</p>
                            <h6>Mandatory Rules (Azure Repos & GitHub):</h6>
                            <ul>
                                <li><strong>Build Validation / Status Checks:</strong> The pull request code <em>must</em> build successfully and pass all CI checks.</li>
                                <li><strong>Reviewer Requirements:</strong> At least one other person <em>must</em> approve the code changes. No self-merges.</li>
                                <li><strong>Work Item / Conversation Linking:</strong> Ensure every change is traceable to a requirement or that all review comments are resolved.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Phase 2: CI -->
        <section class="mb-5">
            <h2 class="section-title" style="color: var(--devops-color-ci);">Phase 2: Continuous Integration (CI)</h2>
             <div class="row g-4">
                 <div class="col-lg-6">
                    <div class="info-card card-ci">
                        <h5><i class="bi bi-filetype-yml"></i> The "Pipeline as Code"</h5>
                        <div class="card-content-wrapper">
                            <p class="summary">Modern pipelines are defined in YAML files (`azure-pipelines.yml` or `.github/workflows/*.yml`) committed to the repository. This provides versioning, peer review, and repeatability. Avoid classic UI editors.</p>
                        </div>
                    </div>
                </div>
                 <div class="col-lg-6">
                    <div class="info-card card-security">
                        <h5><i class="bi bi-shield-shaded"></i> "Shift-Left" Security</h5>
                        <div class="card-content-wrapper">
                            <p class="summary">Security is not a separate step; it's a series of automated gates within CI. Find flaws early before they reach production.</p>
                             <button class="btn btn-sm btn-outline-secondary details-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSecurity">Details</button>
                        </div>
                        <div class="collapse collapse-content" id="collapseSecurity">
                            <h6>Key Security Gates:</h6>
                            <ul>
                                <li><strong>SAST (Static Application Security Testing):</strong> Tools like SonarQube or GitHub CodeQL scan your source code for vulnerabilities and code quality issues.</li>
                                <li><strong>SCA (Software Composition Analysis):</strong> Tools like Dependabot or Snyk scan your open-source dependencies for known vulnerabilities.</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-12">
                    <div class="info-card card-ci">
                        <h5><i class="bi bi-box-seam"></i> Publishing Artifacts: The Docker Example</h5>
                        <div class="card-content-wrapper">
                            <p class="summary">The final output of a successful CI run is a versioned, deployable artifact. Most commonly, this is a Docker image pushed to a container registry.</p>
                            <button class="btn btn-sm btn-outline-secondary details-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#collapseArtifacts">Details</button>
                        </div>
                        <div class="collapse collapse-content" id="collapseArtifacts">
                             <div class="row">
                                <div class="col-md-6">
                                    <h6>Azure Pipelines (`azure-pipelines.yml`)</h6>
                                    <code>trigger:
- main
pool:
  vmImage: ubuntu-latest
steps:
- task: Docker@2
  inputs:
    containerRegistry: 'MyACRConnection'
    repository: 'my-app'
    command: 'buildAndPush'
    Dockerfile: '**/Dockerfile'
    tags: '$(Build.BuildId)'</code>
                                </div>
                                <div class="col-md-6">
                                    <h6>GitHub Actions (`.github/workflows/ci.yml`)</h6>
                                    <code>on:
  push:
    branches: [ "main" ]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Log in to Registry
      uses: azure/docker-login@v1
      with:
        login-server: myregistry.azurecr.io
        username: ${{ secrets.ACR_USERNAME }}
        password: ${{ secrets.ACR_PASSWORD }}
    - name: Build and push image
      run: |
        docker build . -t my.acr.io/app:${{ github.sha }}
        docker push my.acr.io/app:${{ github.sha }}</code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

         <!-- Phase 3: CD -->
        <section class="mb-5">
            <h2 class="section-title" style="color: var(--devops-color-cd);">Phase 3: Continuous Delivery (CD)</h2>
            <div class="row g-4">
                 <div class="col-lg-6">
                    <div class="info-card card-iac">
                        <h5><i class="bi bi-filetype-tf"></i> IaC & The Approval Flow</h5>
                        <div class="card-content-wrapper">
                            <p class="summary">Use Infrastructure as Code (IaC) with Terraform to define environments. The key to safe CD is a `plan -> approve -> apply` flow with a manual approval gate before any infrastructure is changed.</p>
                            <button class="btn btn-sm btn-outline-secondary details-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#collapseIac">Details</button>
                        </div>
                        <div class="collapse collapse-content" id="collapseIac">
                            <h6>The Safety-Critical Flow:</h6>
                             <ul>
                                 <li><strong>Plan:</strong> The pipeline runs `terraform plan` and saves the plan file as an artifact.</li>
                                 <li><strong>Approve:</strong> A human reviewer inspects the plan. Both Azure (Release Gates) and GitHub (Environments) have features to pause the pipeline and require manual sign-off.</li>
                                 <li><strong>Apply:</strong> Only after approval does the pipeline run `terraform apply` using the saved plan.</li>
                             </ul>
                        </div>
                    </div>
                </div>
                 <div class="col-lg-6">
                    <div class="info-card card-cd">
                        <h5><i class="bi bi-rocket-takeoff"></i> Application Deployment</h5>
                        <div class="card-content-wrapper">
                            <p class="summary">Getting the code running in the provisioned environment. This phase handles deploying the application itself and managing dependent changes, like database schemas.</p>
                             <button class="btn btn-sm btn-outline-secondary details-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAppDeploy">Details</button>
                        </div>
                        <div class="collapse collapse-content" id="collapseAppDeploy">
                            <h6>To Kubernetes:</h6>
                            <p>Use <strong>Helm</strong>, the package manager for Kubernetes. The `helm upgrade --install` command is the standard for deploying or updating an application.</p>
                             <h6>For Databases:</h6>
                             <p>This is a classic point of failure. Migration scripts (using tools like EF Core Migrations or Flyway) must be applied <em>before</em> the application code is deployed to ensure compatibility.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Phase 4: Monitoring -->
        <section class="mb-5">
            <h2 class="section-title" style="color: var(--devops-color-monitoring);">Phase 4: Monitoring & Observability</h2>
            <div class="row g-4 justify-content-center">
                 <div class="col-lg-8">
                    <div class="info-card card-monitoring">
                        <h5><i class="bi bi-kanban"></i> The Three Pillars of Observability</h5>
                        <div class="card-content-wrapper">
                            <p class="summary">Once deployed, you must be able to understand the application's health. If you're not monitoring your app, you're flying blind. Instrument your code with a tool like Application Insights or Prometheus.</p>
                            <button class="btn btn-sm btn-outline-secondary details-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMonitoring">Details</button>
                        </div>
                        <div class="collapse collapse-content" id="collapseMonitoring">
                            <p>You need all three to get a complete picture of your system's behavior:</p>
                             <ul>
                                <li><strong>Logs:</strong> Detailed, timestamped records of discrete events. (e.g., "User X failed to log in")</li>
                                <li><strong>Metrics:</strong> Aggregated numerical data over time. (e.g., "5% error rate over the last 10 minutes")</li>
                                <li><strong>Traces:</strong> A detailed view of a single request's journey through all services in your application.</li>
                             </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Appendix: Platforms -->
        <section class="mb-5">
            <h2 class="section-title">Appendix: Platform Choices</h2>
             <div class="row g-4">
                 <div class="col-lg-6">
                    <div class="info-card card-concepts">
                        <h5><i class="bi bi-gear-wide-connected"></i> The Old Guard: Jenkins</h5>
                        <div class="card-content-wrapper">
                            <p class="summary">The infinitely customizable, plugin-driven workhorse. If you can think of it, you can build it. But you own all its complexity, maintenance, and `Jenkinsfile` Groovy spaghetti.</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="info-card card-concepts">
                        <h5><i class="bi bi-bullseye"></i> The All-in-One: GitLab</h5>
                        <div class="card-content-wrapper">
                            <p class="summary">A powerful competitor with a "single application" philosophy. Its CI/CD is extremely mature and tightly integrated via `.gitlab-ci.yml`, with many security features built-in.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="container py-4">
        <p>&copy; 2024 Cheatsheets</p>
    </footer>

    <!-- Bootstrap JS -->
    <script crossorigin="anonymous" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>