<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   System Prompt Builder Tool &amp; Engineering Guide | AI Prompter
  </title>
  <meta content="Build &amp; engineer effective LLM system prompts with our interactive tool. Includes a full guide &amp; templates for AI, prompt engineering, code review, and more." name="description"/>
  <meta content="system prompt, prompt engineering, LLM, AI, prompt builder, prompt guide, generative AI, large language models, AI assistant, prompt templates, AI tools, meta prompting, prompt optimization, code reviewer, fitness coach, legal document writer, creative cheatsheet architect, free prompt tool" name="keywords"/>
  <meta content="David Vekslers Cheatsheets" name="author"/>
  <link href="https://cheatsheets.davidveksler.com/prompt-builder.html" rel="canonical"/>
  <link href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;ðŸ’¡&lt;/text&gt;&lt;/svg&gt;" rel="icon"/>
  <link href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;ðŸ’¡&lt;/text&gt;&lt;/svg&gt;" rel="apple-touch-icon"/>
  <meta content="System Prompt Builder &amp; Engineering Guide" property="og:title"/>
  <meta content="Build powerful, effective system prompts for LLMs and learn advanced prompt engineering techniques with this interactive tool and comprehensive guide." property="og:description"/>
  <meta content="website" property="og:type"/>
  <meta content="https://cheatsheets.davidveksler.com/prompt-builder.html" property="og:url"/>
  <meta content="Screenshot of the System Prompt Builder &amp; Guide Tool Interface" property="og:image:alt"/>
  <meta content="David Vekslers Cheatsheets" property="og:site_name"/>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="System Prompt Builder &amp; Engineering Guide" name="twitter:title"/>
  <meta content="Build powerful, effective system prompts for LLMs and learn advanced prompt engineering techniques with this interactive tool and comprehensive guide." name="twitter:description"/>
  <meta content="Screenshot of the System Prompt Builder &amp; Guide Tool Interface" name="twitter:image:alt"/>
  <script type="application/ld+json">
   {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "System Prompt Builder & Engineering Guide",
      "description": "An interactive tool to build and engineer effective system prompts for Large Language Models (LLMs), complete with a comprehensive prompting guide and useful templates.",
      "url": "https://cheatsheets.davidveksler.com/prompt-builder.html",
      "author": {
        "@type": "Person",
        "name": "David Vekslers",
        "url": "https://www.linkedin.com/in/davidveksler/"
      },
      "publisher": {
        "@type": "Organization",
        "name": "David Vekslers Cheatsheets",
        "logo": {
          "@type": "ImageObject",
          "url": "https://cheatsheets.davidveksler.com/images/prompt-builder-og-image.png"
        }
      },
      "dateModified": "2024-07-25",
      "mainEntity": [
        {
          "@type": "SoftwareApplication",
          "name": "System Prompt Builder Tool",
          "applicationCategory": "DeveloperTool",
          "operatingSystem": "Web-based",
          "description": "Interactive tool to build effective system prompts for Large Language Models (LLMs). Features templates and customization for AI role, tasks, tone, output, and advanced reasoning techniques.",
          "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
          },
          "author": {
            "@type": "Person",
            "name": "David Vekslers"
          },
          "keywords": "prompt builder, system prompt, LLM tool, AI prompt generator, prompt engineering tool"
        },
        {
          "@type": "TechArticle",
          "headline": "Effective Prompt Engineering: A Comprehensive Guide & Cheatsheet",
          "description": "Master prompt engineering for LLMs. This guide covers foundational principles, core techniques like zero-shot, few-shot, Chain-of-Thought (CoT), and advanced strategies including RAG, ReAct, and self-critique.",
          "author": {
            "@type": "Person",
            "name": "David Vekslers"
          },
          "datePublished": "2024-03-15",
          "dateModified": "2024-07-25",
          "articleSection": [
            "Foundational Principles",
            "Core Prompting Techniques",
            "Advanced & Evolving Strategies",
            "Ethical Considerations"
          ],
          "keywords": "prompt engineering, LLM guide, AI prompting, Chain-of-Thought, few-shot prompting, RAG, ReAct, prompt optimization"
        }
      ]
    }
  </script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
   <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
    <style>
     body {
        padding-top: 20px;
        background-color: #f8f9fa;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
          "Segoe UI Symbol";
      }
      .container-main {
        max-width: 980px;
      }
      .form-check-input[type="checkbox"] {
        cursor: pointer;
      }
      #generatedPromptContainer {
        margin-top: 30px;
        position: relative;
      }
      #copyPromptButton {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 10;
      }
      .advisor-panel {
        background-color: #eef7ff;
        border-left: 5px solid #0d6efd;
        padding: 15px;
        margin-bottom: 20px;
        font-size: 0.9em;
        border-radius: 0.375rem;
      }
      .advisor-panel ul {
        padding-left: 20px;
        margin-bottom: 0;
      }
      .nav-tabs .nav-link {
        color: #0d6efd;
        font-weight: 500;
      }
      .nav-tabs .nav-link.active {
        color: #495057;
        background-color: #fff;
        border-color: #dee2e6 #dee2e6 #fff;
      }
      .tab-content {
        border: 1px solid #dee2e6;
        border-top: none;
        padding: 25px;
        background-color: #fff;
        box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.05);
        border-bottom-left-radius: 0.375rem;
        border-bottom-right-radius: 0.375rem;
      }
      .guide-section h4 {
        margin-top: 1.75rem;
        margin-bottom: 0.75rem;
        color: #0d6efd;
        border-bottom: 1px solid #e9ecef;
        padding-bottom: 0.5rem;
      }
      .guide-section h5 {
        margin-top: 1.25rem;
        margin-bottom: 0.5rem;
        color: #198754;
      }
      .guide-section p,
      .guide-section li {
        font-size: 0.95rem;
        line-height: 1.65;
      }
      .guide-section code {
        background-color: #e9ecef;
        padding: 0.2em 0.4em;
        border-radius: 3px;
        font-size: 0.9em;
        color: #d63384;
      }
      .guide-section pre > code {
        display: block;
        padding: 1rem;
        white-space: pre-wrap;
        word-break: break-all;
      }
      .header-title-area {
        padding-bottom: 1.5rem;
        border-bottom: 1px solid #dee2e6;
        margin-bottom: 1.5rem !important;
      }
      .header-title-area h1 {
        font-size: 2.2rem;
        color: #343a40;
        font-weight: 600;
      }
      .header-title-area h1 .bi {
        color: #0d6efd;
        margin-right: 0.6rem;
        vertical-align: -0.1em;
      }
      .accordion-button {
        font-weight: 500;
      }
      .accordion-button:not(.collapsed) {
        background-color: #e7f1ff;
        color: #0a58ca;
      }
      .accordion-button:focus {
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
      }
      .accordion-item {
        margin-bottom: 0.75rem;
        border: 1px solid #dee2e6;
        border-radius: 0.375rem !important;
        overflow: hidden;
      }
      #generatedPromptOutput {
        background-color: #f1f3f5;
        border-radius: 0.25rem;
        font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        font-size: 0.9em;
        line-height: 1.5;
      }
      .config-buttons-wrapper {
        display: flex;
        justify-content: flex-start;
        gap: 0.5rem;
      }
      @media (min-width: 768px) {
        .config-buttons-wrapper {
            justify-content: flex-end;
        }
      }
      footer.text-center {
        padding-top: 2rem;
        padding-bottom: 1rem;
        border-top: 1px solid #e0e0e0;
        color: #6c757d;
        font-size: 0.9rem;
      }
      footer.text-center a {
        color: #0d6efd;
        text-decoration: none;
      }
      footer.text-center a:hover {
        text-decoration: underline;
      }
    </style>
   </link>
  </link>
  <meta content="images/prompt-builder-og-image.png" property="og:image"/>
  <meta content="images/prompt-builder-og-image.png" name="twitter:image"/>
 </head>
 <body>
  <div class="container container-main">
   <div class="text-center header-title-area">
    <h1>
     <i aria-hidden="true" class="bi bi-journal-richtext">
     </i>
     System Prompt Builder &amp; Engineering Guide
    </h1>
   </div>
   <ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
     <button aria-controls="builder-tab-pane" aria-selected="true" class="nav-link active" data-bs-target="#builder-tab-pane" data-bs-toggle="tab" id="builder-tab" role="tab" type="button">
      <i aria-hidden="true" class="bi bi-tools">
      </i>
      Prompt Builder
     </button>
    </li>
    <li class="nav-item" role="presentation">
     <button aria-controls="guide-tab-pane" aria-selected="false" class="nav-link" data-bs-target="#guide-tab-pane" data-bs-toggle="tab" id="guide-tab" role="tab" type="button">
      <i aria-hidden="true" class="bi bi-book-half">
      </i>
      Prompting Guide
     </button>
    </li>
   </ul>
   <div class="tab-content" id="myTabContent">
    <div aria-labelledby="builder-tab" class="tab-pane fade show active" id="builder-tab-pane" role="tabpanel" tabindex="0">
     <p class="lead mt-2">
      Select an archetype or build your prompt from scratch. The prompt will update below as you make changes.
     </p>
     <div class="row mb-3 align-items-end">
      <div class="col-md-6">
       <label class="form-label" for="promptTemplate">
        <strong>
         Load a Template Archetype:
        </strong>
       </label>
       <select class="form-select" id="promptTemplate">
        <option value="">
         -- Select a Template (or build custom) --
        </option>
        <option value="technicalExplainer">
         Technical Explainer
        </option>
        <option value="codeAssistant">
         Code Assistant
        </option>
        <option value="codeReviewer">
         Code Reviewer
        </option>
        <option value="creativeWriter">
         Creative Storyteller
        </option>
        <option value="dataAnalyst">
         Data Analyst Assistant
        </option>
        <option value="fitnessNutritionCoach">
         Fitness/Nutrition Coach
        </option>
        <option value="legalDocumentWriter">
         Legal Document Writer
        </option>
        <option value="socraticTutor">
         Socratic Tutor
        </option>
        <option value="customerSupportAgent">
         Customer Support Agent
        </option>
        <option value="researchSynthesizer">
         Research Synthesizer
        </option>
        <option value="brainstormingFacilitator">
         Brainstorming Facilitator
        </option>
        <option value="creativeCheatsheetArchitect">
         Creative Cheatsheet Architect
        </option>
        <option value="executiveSummarizer">
         Executive Summarizer
        </option>
        <option value="socialMediaContentCreator">
         Social Media Content Creator
        </option>
        <option value="nuancedTranslatorLocalizer">
         Nuanced Translator &amp; Localizer
        </option>
        <option value="politeEmailDrafterResponder">
         Polite Email Drafter/Responder
        </option>
        <option value="reset">
         Start Fresh / Clear Form
        </option>
       </select>
      </div>
      <div class="col-md-6">
       <div class="config-buttons-wrapper mt-2 mt-md-0">
        <button class="btn btn-sm btn-outline-secondary" id="exportConfig">
         <i aria-hidden="true" class="bi bi-download">
         </i>
         Export
        </button>
        <input accept=".json" id="importConfigFile" style="display: none" type="file"/>
        <button class="btn btn-sm btn-outline-secondary" id="importConfigTrigger">
         <i aria-hidden="true" class="bi bi-upload">
         </i>
         Import
        </button>
       </div>
      </div>
     </div>
     <div class="advisor-panel d-none" id="advisorPanel">
      <h6>
       <i aria-hidden="true" class="bi bi-info-circle-fill">
       </i>
       Prompting Tips:
      </h6>
      <ul id="advisorMessages">
      </ul>
     </div>
     <div class="accordion" id="promptBuilderAccordion">
      <div class="accordion-item">
       <h2 class="accordion-header">
        <button aria-expanded="true" class="accordion-button" data-bs-target="#collapseOne" data-bs-toggle="collapse" type="button">
         <input checked="" class="form-check-input me-2 section-toggle" id="toggleCoreIdentity" type="checkbox"/>
         1. Core Identity &amp; Goal
        </button>
       </h2>
       <div class="accordion-collapse collapse show" data-bs-parent="#promptBuilderAccordion" id="collapseOne">
        <div class="accordion-body">
         <div class="mb-3">
          <label class="form-label" for="aiRole">
           <strong>
            AI Role/Persona:
           </strong>
          </label>
          <input class="form-control" id="aiRole" placeholder="e.g., You are an expert astrophysicist..." type="text"/>
         </div>
         <div class="mb-3">
          <label class="form-label" for="aiPersonaDetails">
           <strong>
            Persona Details (Optional):
           </strong>
          </label>
          <textarea class="form-control" id="aiPersonaDetails" placeholder="e.g., You have a PhD, specialize in black holes, and are slightly witty." rows="2"></textarea>
         </div>
         <div class="mb-3">
          <label class="form-label" for="aiGoal">
           <strong>
            Primary Goal:
           </strong>
          </label>
          <input class="form-control" id="aiGoal" placeholder="e.g., Your primary goal is to explain complex concepts..." type="text"/>
         </div>
         <div class="mb-3">
          <label class="form-label" for="aiAudience">
           <strong>
            Target Audience (Optional):
           </strong>
          </label>
          <input class="form-control" id="aiAudience" placeholder="e.g., High school students." type="text"/>
         </div>
        </div>
       </div>
      </div>
      <div class="accordion-item">
       <h2 class="accordion-header">
        <button class="accordion-button collapsed" data-bs-target="#collapseTwo" data-bs-toggle="collapse" type="button">
         <input checked="" class="form-check-input me-2 section-toggle" id="toggleKeyTasks" type="checkbox"/>
         2. Key Tasks &amp; Functions
        </button>
       </h2>
       <div class="accordion-collapse collapse" data-bs-parent="#promptBuilderAccordion" id="collapseTwo">
        <div class="accordion-body">
         <label class="form-label" for="aiTasks">
          <strong>
           Specific Tasks:
          </strong>
         </label>
         <textarea class="form-control" id="aiTasks" placeholder="List tasks using action verbs..." rows="3"></textarea>
        </div>
       </div>
      </div>
      <div class="accordion-item">
       <h2 class="accordion-header">
        <button class="accordion-button collapsed" data-bs-target="#collapseThree" data-bs-toggle="collapse" type="button">
         <input checked="" class="form-check-input me-2 section-toggle" id="toggleInteractionStyle" type="checkbox"/>
         3. Interaction Style &amp; Tone
        </button>
       </h2>
       <div class="accordion-collapse collapse" data-bs-parent="#promptBuilderAccordion" id="collapseThree">
        <div class="accordion-body">
         <div class="mb-3">
          <label class="form-label" for="aiTone">
           <strong>
            Tone:
           </strong>
          </label>
          <select class="form-select" id="aiTone">
           <option selected="" value="Neutral">
            Neutral
           </option>
           <option value="Formal">
            Formal
           </option>
           <option value="Casual">
            Casual
           </option>
           <option value="Friendly">
            Friendly
           </option>
           <option value="Authoritative">
            Authoritative
           </option>
           <option value="Objective">
            Objective
           </option>
           <option value="Empathetic">
            Empathetic
           </option>
           <option value="Witty">
            Witty
           </option>
           <option value="Technical">
            Technical
           </option>
           <option value="Patient">
            Patient
           </option>
           <option value="Encouraging">
            Encouraging
           </option>
           <option value="Skeptical">
            Skeptical
           </option>
           <option value="Inspiring">
            Inspiring
           </option>
          </select>
         </div>
         <div class="mb-3">
          <label class="form-label" for="aiCommunicationStyle">
           <strong>
            Communication Style Details (Optional):
           </strong>
          </label>
          <textarea class="form-control" id="aiCommunicationStyle" placeholder="e.g., Ask clarifying questions... Use analogies..." rows="2"></textarea>
         </div>
        </div>
       </div>
      </div>
      <div class="accordion-item">
       <h2 class="accordion-header">
        <button class="accordion-button collapsed" data-bs-target="#collapseFour" data-bs-toggle="collapse" type="button">
         <input checked="" class="form-check-input me-2 section-toggle" id="toggleContentStandards" type="checkbox"/>
         4. Content Standards &amp; Expertise
        </button>
       </h2>
       <div class="accordion-collapse collapse" data-bs-parent="#promptBuilderAccordion" id="collapseFour">
        <div class="accordion-body">
         <div class="form-check mb-2">
          <input checked="" class="form-check-input" id="emphasizeAccuracy" type="checkbox"/>
          <label class="form-check-label" for="emphasizeAccuracy">
           Emphasize accuracy and evidence-based reasoning.
          </label>
         </div>
         <div class="mb-3">
          <label class="form-label" for="aiKnowledge">
           <strong>
            Knowledge Base/Cutoff (Optional):
           </strong>
          </label>
          <input class="form-control" id="aiKnowledge" placeholder="e.g., Your knowledge is current up to January 2024. Access to [specific docs]." type="text"/>
         </div>
         <div class="mb-3">
          <label class="form-label" for="aiDepthDetail">
           <strong>
            Depth/Detail Level (Optional):
           </strong>
          </label>
          <input class="form-control" id="aiDepthDetail" placeholder="e.g., Provide highly detailed answers. Offer executive summaries first." type="text"/>
         </div>
        </div>
       </div>
      </div>
      <div class="accordion-item">
       <h2 class="accordion-header">
        <button class="accordion-button collapsed" data-bs-target="#collapseFive" data-bs-toggle="collapse" type="button">
         <input checked="" class="form-check-input me-2 section-toggle" id="toggleOutputFormat" type="checkbox"/>
         5. Output Requirements &amp; Formatting
        </button>
       </h2>
       <div class="accordion-collapse collapse" data-bs-parent="#promptBuilderAccordion" id="collapseFive">
        <div class="accordion-body">
         <div class="mb-3">
          <label class="form-label" for="promptStructureMethod">
           <strong>
            Overall Prompt Structure for LLM:
           </strong>
          </label>
          <select class="form-select" id="promptStructureMethod">
           <option selected="" value="markdown">
            Markdown Headings (Default)
           </option>
           <option value="xml">
            XML Tags (e.g., for Anthropic/Claude)
           </option>
          </select>
          <small class="form-text text-muted">
           This structures the entire system prompt you're building.
          </small>
         </div>
         <hr/>
         <div class="mb-3">
          <label class="form-label" for="aiOutputFormat">
           <strong>
            AI Response Format Instructions:
           </strong>
          </label>
          <textarea class="form-control" id="aiOutputFormat" placeholder="e.g., Respond in Markdown. Use JSON for lists with keys 'item', 'value'..." rows="3"></textarea>
         </div>
         <div class="mb-3">
          <label class="form-label" for="aiLengthConstraints">
           <strong>
            AI Response Length Constraints (Optional):
           </strong>
          </label>
          <input class="form-control" id="aiLengthConstraints" placeholder="e.g., Keep summaries under 200 words." type="text"/>
         </div>
         <div class="form-check mb-2">
          <input checked="" class="form-check-input" id="useHeadingsLists" type="checkbox"/>
          <label class="form-check-label" for="useHeadingsLists">
           AI should use headings and lists for clarity in its response.
          </label>
         </div>
        </div>
       </div>
      </div>
      <div class="accordion-item">
       <h2 class="accordion-header">
        <button class="accordion-button collapsed" data-bs-target="#collapseSix" data-bs-toggle="collapse" type="button">
         <input checked="" class="form-check-input me-2 section-toggle" id="toggleConstraints" type="checkbox"/>
         6. Constraints &amp; Safeguards
        </button>
       </h2>
       <div class="accordion-collapse collapse" data-bs-parent="#promptBuilderAccordion" id="collapseSix">
        <div class="accordion-body">
         <div class="mb-3">
          <label class="form-label" for="aiProhibitions">
           <strong>
            Absolute Prohibitions (MUST NOT do):
           </strong>
          </label>
          <textarea class="form-control" id="aiProhibitions" placeholder="e.g., Do not provide medical advice... Do not generate harmful content..." rows="3"></textarea>
         </div>
         <div class="mb-3">
          <label class="form-label" for="aiAvoidances">
           <strong>
            Scope Limitations / Topics to Avoid (Optional):
           </strong>
          </label>
          <textarea class="form-control" id="aiAvoidances" placeholder="e.g., Avoid discussing contemporary political figures. Stick to topics X, Y, Z." rows="2"></textarea>
         </div>
         <div class="form-check mb-2">
          <input checked="" class="form-check-input" id="avoidBias" type="checkbox"/>
          <label class="form-check-label" for="avoidBias">
           Strive for neutrality and avoid societal biases.
          </label>
         </div>
        </div>
       </div>
      </div>
      <div class="accordion-item">
       <h2 class="accordion-header">
        <button class="accordion-button collapsed" data-bs-target="#collapseSeven" data-bs-toggle="collapse" type="button">
         <input class="form-check-input me-2 section-toggle" id="toggleReasoning" type="checkbox"/>
         7. Reasoning &amp; Process
        </button>
       </h2>
       <div class="accordion-collapse collapse" data-bs-parent="#promptBuilderAccordion" id="collapseSeven">
        <div class="accordion-body">
         <div class="form-check mb-2">
          <input class="form-check-input" id="useCoT" type="checkbox"/>
          <label class="form-check-label" for="useCoT">
           Employ step-by-step reasoning (Chain-of-Thought).
          </label>
          <input class="form-control form-control-sm mt-1" id="cotPhrase" placeholder="Optional: Custom phrase e.g., 'Let's think step by step.'" type="text"/>
         </div>
         <div class="form-check mb-2">
          <input class="form-check-input" id="useScratchpad" type="checkbox"/>
          <label class="form-check-label" for="useScratchpad">
           Use an internal scratchpad/thinking process.
          </label>
          <input class="form-control form-control-sm mt-1" id="scratchpadTags" placeholder="Optional: e.g., Enclose thoughts in &lt;thinking&gt;&lt;/thinking&gt; tags." type="text"/>
         </div>
         <div class="form-check mb-2">
          <input class="form-check-input" id="preAnalysisStep" type="checkbox"/>
          <label class="form-check-label" for="preAnalysisStep">
           Perform a pre-analysis/planning step before answering.
          </label>
          <input class="form-control form-control-sm mt-1" id="preAnalysisInstructions" placeholder="Optional: e.g., 'Before answering, outline key points.'" type="text"/>
         </div>
         <div class="form-check mb-2">
          <input class="form-check-input" id="selfCritique" type="checkbox"/>
          <label class="form-check-label" for="selfCritique">
           Perform self-critique and refinement.
          </label>
         </div>
         <div class="form-check mb-2">
          <input class="form-check-input" id="consultKnowledge" type="checkbox"/>
          <label class="form-check-label" for="consultKnowledge">
           Consult external knowledge/tools if necessary and capable.
          </label>
          <input class="form-control form-control-sm mt-1" id="knowledgeSourceHint" placeholder="Optional: e.g., 'Refer to pre-loaded documents about X.'" type="text"/>
         </div>
         <div class="form-check mb-2">
          <input class="form-check-input" id="allowToolUse" type="checkbox"/>
          <label class="form-check-label" for="allowToolUse">
           Allow use of specific external tools (if model is capable).
          </label>
          <input class="form-control form-control-sm mt-1" id="toolUseExamples" placeholder="Optional: e.g., 'You can use search_engine tool. You can use calculator tool.'" type="text"/>
         </div>
        </div>
       </div>
      </div>
      <div class="accordion-item">
       <h2 class="accordion-header">
        <button class="accordion-button collapsed" data-bs-target="#collapseEight" data-bs-toggle="collapse" type="button">
         <input class="form-check-input me-2 section-toggle" id="toggleExamples" type="checkbox"/>
         8. Few-Shot Examples
        </button>
       </h2>
       <div class="accordion-collapse collapse" data-bs-parent="#promptBuilderAccordion" id="collapseEight">
        <div class="accordion-body">
         <div id="examplesContainer">
         </div>
         <button class="btn btn-sm btn-outline-primary mt-2" id="addExampleButton" type="button">
          <i aria-hidden="true" class="bi bi-plus-circle">
          </i>
          Add Example
         </button>
         <small class="form-text text-muted d-block mt-1">
          Provide 1-3 clear input/output pairs. Few-shot examples significantly improve performance, especially for custom formats or nuanced tasks. Ensure examples are high-quality and accurately reflect the desired output.
         </small>
        </div>
       </div>
      </div>
     </div>
     <div id="generatedPromptContainer">
      <h4>
       Generated System Prompt:
      </h4>
      <button class="btn btn-sm btn-outline-secondary" id="copyPromptButton" title="Copy to Clipboard">
       <i aria-hidden="true" class="bi bi-clipboard">
       </i>
       Copy
      </button>
      <pre><code class="p-3 border d-block" id="generatedPromptOutput" style="min-height: 200px; white-space: pre-wrap; word-wrap: break-word;">Your generated prompt will appear here as you build it...</code></pre>
     </div>
    </div>
    <div aria-labelledby="guide-tab" class="tab-pane fade" id="guide-tab-pane" role="tabpanel" tabindex="0">
     <h2 class="mt-2">
      Effective Prompt Engineering: A Cheatsheet
     </h2>
     <p class="lead">
      Master the art of crafting prompts that get the best results from Large Language Models (LLMs).
     </p>
     <div class="guide-section">
      <h4>
       I. Foundational Principles (The Bedrock)
      </h4>
      <h5>
       A. Clarity and Specificity
      </h5>
      <p>
       Your prompt must be unambiguous. The AI should know exactly what you want. State the goal directly.
      </p>
      <ul>
       <li>
        <strong>
         Be explicit:
        </strong>
        Don't assume the AI knows implicit context.
       </li>
       <li>
        <strong>
         Use action verbs:
        </strong>
        Clearly define the task (e.g.,
        <code>
         Summarize
        </code>
        ,
        <code>
         Analyze
        </code>
        ,
        <code>
         Generate
        </code>
        ,
        <code>
         List
        </code>
        ,
        <code>
         Translate
        </code>
        ).
       </li>
       <li>
        <strong>
         Avoid jargon
        </strong>
        unless you're sure the AI knows it or you define it in the prompt.
       </li>
      </ul>
      <h5>
       B. Provide Sufficient Context
      </h5>
      <p>
       LLMs don't have memory of past separate conversations (unless using specific session features). Give all
              necessary background in the prompt.
      </p>
      <ul>
       <li>
        Include relevant details, parameters, or constraints the AI needs to consider.
       </li>
       <li>
        If referring to something specific, provide it (e.g., "Summarize the following text: [text here]").
       </li>
      </ul>
      <h5>
       C. Define the Desired Output Format
      </h5>
      <p>
       Tell the AI how you want its response structured. This greatly improves usability.
      </p>
      <ul>
       <li>
        Examples:
        <ul>
         <li>
          <code>
           Provide the answer as a JSON object with keys 'name' and 'capital'.
          </code>
         </li>
         <li>
          <code>
           List the steps as a numbered list.
          </code>
         </li>
         <li>
          <code>
           Write a 500-word blog post with an introduction, three main points, and a conclusion.
          </code>
         </li>
         <li>
          <code>
           Use Markdown for formatting.
          </code>
         </li>
        </ul>
       </li>
       <li>
        For complex tasks, specifying structured output (JSON, XML, YAML) is highly recommended for the AI's response.
       </li>
      </ul>
      <h5>
       D. Assign a Persona/Role
      </h5>
      <p>
       Instructing the AI to adopt a specific persona helps tailor the tone, style, and expertise level.
      </p>
      <ul>
       <li>
        Examples:
        <ul>
         <li>
          <code>
           You are a senior financial analyst.
          </code>
         </li>
         <li>
          <code>
           Act as a travel guide for Paris, focusing on historical sites.
          </code>
         </li>
         <li>
          <code>
           Respond as if you are a patient and encouraging high school science teacher.
          </code>
         </li>
        </ul>
       </li>
       <li>
        Specify desired tone (e.g.,
        <code>
         formal
        </code>
        ,
        <code>
         casual
        </code>
        ,
        <code>
         witty
        </code>
        ,
        <code>
         empathetic
        </code>
        ) and target audience.
       </li>
       <li>
        Be specific about the persona's expertise level, background, and even disposition if relevant (e.g., 'You are a skeptical but fair journalist,' 'You are an encouraging mentor').
       </li>
      </ul>
     </div>
     <div class="guide-section">
      <h4>
       II. Core Prompting Techniques
      </h4>
      <h5>
       A. Zero-Shot Prompting
      </h5>
      <p>
       Asking the model to perform a task it hasn't been explicitly trained on with in-prompt examples for that
              specific task. Relies on generalization.
      </p>
      <p>
       Example:
       <code>
        Translate the following English text to French: "Hello, how are you?"
       </code>
      </p>
      <h5>
       B. Few-Shot Prompting (In-Context Learning)
      </h5>
      <p>
       Providing a few examples (input/output pairs) within the prompt to demonstrate the desired behavior,
              format, or style. Highly effective.
      </p>
      <p>
       Structure:
       <br/>
       <code>
        User: [Example Input 1]
       </code>
       <br/>
       <code>
        AI: [Example Ideal Output 1]
       </code>
       <br/>
       <code>
        User: [Example Input 2]
       </code>
       <br/>
       <code>
        AI: [Example Ideal Output 2]
       </code>
       <br/>
       <code>
        User: [Actual Input for AI to process]
       </code>
       <br/>
       <code>
        AI:
       </code>
      </p>
      <ul>
       <li>
        Usually 1-5 examples are sufficient. Too many can exceed context length or confuse the model.
       </li>
       <li>
        Ensure examples are high quality and accurately reflect the desired output.
       </li>
      </ul>
      <h5>
       C. Chain-of-Thought (CoT) Prompting
      </h5>
      <p>
       Guiding the AI to "think step by step" by providing examples where the reasoning process is explicitly
              laid out before the final answer. Significantly improves performance on tasks requiring reasoning (math,
              logic puzzles, complex Q&amp;A).
      </p>
      <p>
       Example of a CoT example pair in a few-shot prompt:
      </p>
      <pre><code>User: Roger has 5 tennis balls. He buys 2 more cans of tennis balls. Each can has 3 tennis balls. How many tennis balls does he have now?
AI: Roger started with 5 balls. He bought 2 cans, and each can has 3 balls. So, he bought 2 * 3 = 6 more balls. In total, he now has 5 + 6 = 11 balls. The final answer is 11.</code></pre>
      <p>
       You can also trigger CoT by adding phrases like
       <code>
        "Let's think step by step."
       </code>
       or
       <code>
        "Break this down."
       </code>
       to your prompt. Some models respond well to instructions like
       <code>
        "Show your work."
       </code>
      </p>
      <h5>
       D. Self-Consistency
      </h5>
      <p>
       For complex reasoning tasks where high accuracy is crucial, you can improve reliability by generating multiple responses to the same prompt (e.g., by increasing the model's "temperature" or randomness setting if available, or by slightly rephrasing the prompt). Then, select the most common answer or the one that appears most robust across several generations. This helps reduce the chance of an occasional flawed reasoning path.
      </p>
     </div>
     <div class="guide-section">
      <h4>
       III. Advanced &amp; Evolving Strategies
      </h4>
      <h5>
       A. Iterative Refinement &amp; Experimentation
      </h5>
      <p>
       Prompt engineering is an empirical science. Start simple and build up. Test, analyze the output, and
              refine your prompt. Small changes can have big impacts.
      </p>
      <ul>
       <li>
        Keep a log of prompts and their results.
       </li>
       <li>
        Try different phrasings, order of instructions, or levels of detail.
       </li>
      </ul>
      <h5>
       B. Structuring Prompts with Delimiters/Tags
      </h5>
      <p>
       Use clear separators (e.g., triple quotes
       <code>
        """
       </code>
       , XML tags like
       <code>
        &lt;instruction&gt;...&lt;/instruction&gt;
       </code>
       , or Markdown headings
       <code>
        ## Input Data
       </code>
       ) to distinguish instructions, context, examples, and input data.
       <strong>
        This is highly recommended as it significantly helps the AI parse the prompt effectively.
       </strong>
       Anthropic's Claude models, for instance, are specifically trained to pay attention to XML tags, making them particularly effective for structuring prompts for these models. Using distinct tags for different instruction types (e.g.,
       <code>
        &lt;role&gt;
       </code>
       ,
       <code>
        &lt;user_query&gt;
       </code>
       ,
       <code>
        &lt;output_constraints&gt;
       </code>
       ) is a best practice.
      </p>
      <pre><code>&lt;role_definition&gt;
  You are a helpful assistant.
&lt;/role_definition&gt;

&lt;user_query&gt;
  What's the capital of France?
&lt;/user_query&gt;

&lt;output_instructions&gt;
  Respond concisely.
&lt;/output_instructions&gt;</code></pre>
      <h5>
       C. Breaking Down Complex Tasks (Prompt Chaining)
      </h5>
      <p>
       Decompose very complex requests into smaller, manageable steps. The output of one prompt can become the
              input or context for the next (prompt chaining).
      </p>
      <h5>
       D. Self-Refine Prompting
      </h5>
      <p>
       Instruct the model to generate an initial response, then critically evaluate its own response for
              weaknesses (e.g., accuracy, completeness, clarity), and finally refine it before presenting the final
              answer. This can be done in a multi-turn conversation or within a complex single prompt.
      </p>
      <p>
       Example instruction:
       <code>
        "First, write a draft answer. Then, review your draft for any inaccuracies or areas that could be
                explained more clearly. Finally, provide the revised and improved answer."
       </code>
      </p>
      <h5>
       E. Using a "Scratchpad" / Internal Monologue
      </h5>
      <p>
       For complex reasoning, instruct the model to "think out loud" or use a scratchpad area (which you might
              instruct it to exclude from the final output). Some models benefit from being told to put intermediate
              thoughts in specific tags (e.g.,
       <code>
        &lt;thinking&gt;...&lt;/thinking&gt;
       </code>
       or
       <code>
        &lt;scratchpad&gt;...&lt;/scratchpad&gt;
       </code>
       ) and then explicitly tell it to exclude content within these tags from the final user-facing response.
      </p>
      <h5>
       F. Retrieval Augmented Generation (RAG)
      </h5>
      <p>
       Retrieval Augmented Generation (RAG) is a powerful technique where the LLM's knowledge is augmented by dynamically retrieving information from external sources (like a vector database of your documents, or a live API)
       <em>
        before
       </em>
       generating a response. While setting up a full RAG system is beyond simple prompting, you can simulate aspects of it by:
       <ul>
        <li>
         Providing specific context directly in the prompt (if it's short enough).
        </li>
        <li>
         Instructing the AI to formulate queries it
         <em>
          would
         </em>
         use to find information if it had access to a search tool, then (if in an interactive setup) you can run those searches and provide the results back to the AI in a subsequent turn.
        </li>
        <li>
         For models with built-in browsing/tool use, explicitly instructing them to search for specific information can be a form of RAG.
        </li>
       </ul>
       This is key for tasks requiring up-to-date, domain-specific, or private knowledge not present in the model's training data.
      </p>
      <h5>
       G. Understanding Context Window &amp; Placement
      </h5>
      <ul>
       <li>
        Be mindful of the model's context window (max input length).
       </li>
       <li>
        Experiment with instruction placement. Some models are more sensitive to instructions at the beginning,
                others at the end, especially with long contexts (e.g., Anthropic suggests important instructions can go
                at the end for Claude). It's often effective to place the most critical instruction or the primary task right before the user's input if providing few-shot examples or extensive context.
       </li>
      </ul>
      <h5>
       H. Tree of Thoughts (ToT)
      </h5>
      <p>
       An advanced technique where the model is prompted to explore multiple reasoning paths (like branches of a tree) for a problem. It can evaluate these different paths and choose the most promising one, or even backtrack if a path seems unhelpful. This is more complex to implement in a single prompt and often involves the LLM self-critiquing different lines of thought.
      </p>
      <h5>
       I. ReAct (Reasoning and Acting)
      </h5>
      <p>
       This framework enables LLMs to generate both reasoning traces (like Chain-of-Thought) and task-specific actions. These actions can include using tools (like a calculator or a search engine API) and then integrating the information gathered from these tools back into its reasoning process to arrive at a final answer. To implement this, you'd define the available tools and instruct the model on how it can decide to use them.
      </p>
      <h5>
       J. Directional Stimulus Prompting (DSP)
      </h5>
      <p>
       Instead of providing highly explicit instructions for every detail, DSP involves giving the model subtle "hints" or "cues" that gently steer it towards the desired output style, content focus, or level of detail. This can be useful for creative tasks where you want to guide the model without over-constraining it. For example, including a few keywords related to a specific theme can act as a directional stimulus.
      </p>
      <h5>
       K. CLEAR Framework (Concise, Logical, Explicit, Adapt, Reflect)
      </h5>
      <p>
       Some practitioners advocate for frameworks like CLEAR to structure their prompting approach systematically:
       <ul>
        <li>
         <strong>
          Concise:
         </strong>
         Be brief but comprehensive. Avoid verbosity.
        </li>
        <li>
         <strong>
          Logical:
         </strong>
         Structure your prompt in a way that makes sense for the AI to process.
        </li>
        <li>
         <strong>
          Explicit:
         </strong>
         Clearly state what you want, including format, persona, and constraints. Don't make the AI guess.
        </li>
        <li>
         <strong>
          Adapt:
         </strong>
         Be prepared to iterate. If the first prompt doesn't work, analyze the output and adapt your prompt.
        </li>
        <li>
         <strong>
          Reflect:
         </strong>
         After the interaction, consider what worked, what didn't, and why, to improve future prompts.
        </li>
       </ul>
      </p>
     </div>
     <div class="guide-section">
      <h4>
       IV. Key Considerations
      </h4>
      <h5>
       A. Ethical Considerations &amp; Bias Mitigation
      </h5>
      <p>
       Design prompts to avoid generating harmful, biased, or inaccurate information. Be aware that LLMs can
              reflect biases present in their training data.
      </p>
      <ul>
       <li>
        Explicitly instruct against stereotypes or biased language if the topic is sensitive.
       </li>
       <li>
        Ask for balanced perspectives.
       </li>
       <li>
        If appropriate for the AI's role, instruct it to acknowledge uncertainty or the limitations of its knowledge, rather than generating speculative or potentially misleading information.
       </li>
      </ul>
      <h5>
       B. Adapting to Model Updates
      </h5>
      <p>
       LLMs are constantly evolving. Strategies that work well today might need adjustment as models are updated.
              Stay informed about best practices for the specific model you're using.
      </p>
      <p>
       Different models may have different strengths, weaknesses, and optimal prompting styles. What works best for GPT-4o might need slight adjustments for Claude 3.5 Sonnet or Gemini 1.5 Pro. Always refer to the latest documentation or guides provided by the AI lab for the specific model you are using.
      </p>
     </div>
     <p class="mt-4 text-center">
      <small>
       This guide is a starting point. The best way to learn is by experimenting!
      </small>
     </p>
    </div>
   </div>
   <footer class="container text-center pb-3">
    <p class="mb-2">
     Â© 2025 David Veksler
    </p>
    <div>
     <a class="mx-2 link-secondary" href="https://www.linkedin.com/in/davidveksler/" rel="noopener noreferrer" target="_blank" title="David Veksler on LinkedIn">
      <i aria-hidden="true" class="bi bi-linkedin">
      </i>
      LinkedIn
     </a>
     <a class="mx-2 link-secondary" href="https://cheatsheets.davidveksler.com/" title="Browse All Cheatsheets">
      <i aria-hidden="true" class="bi bi-collection">
      </i>
      All Cheatsheets
     </a>
    </div>
   </footer>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js">
  </script>
  <script>
   const DOMElements = {
        promptTemplate: document.getElementById("promptTemplate"),
        aiRole: document.getElementById("aiRole"),
        aiPersonaDetails: document.getElementById("aiPersonaDetails"),
        aiGoal: document.getElementById("aiGoal"),
        aiAudience: document.getElementById("aiAudience"),
        aiTasks: document.getElementById("aiTasks"),
        aiTone: document.getElementById("aiTone"),
        aiCommunicationStyle: document.getElementById("aiCommunicationStyle"),
        emphasizeAccuracy: document.getElementById("emphasizeAccuracy"),
        aiKnowledge: document.getElementById("aiKnowledge"),
        aiDepthDetail: document.getElementById("aiDepthDetail"),
        promptStructureMethod: document.getElementById("promptStructureMethod"),
        aiOutputFormat: document.getElementById("aiOutputFormat"),
        aiLengthConstraints: document.getElementById("aiLengthConstraints"),
        useHeadingsLists: document.getElementById("useHeadingsLists"),
        aiProhibitions: document.getElementById("aiProhibitions"),
        aiAvoidances: document.getElementById("aiAvoidances"),
        avoidBias: document.getElementById("avoidBias"),
        useCoT: document.getElementById("useCoT"),
        cotPhrase: document.getElementById("cotPhrase"),
        useScratchpad: document.getElementById("useScratchpad"),
        scratchpadTags: document.getElementById("scratchpadTags"),
        preAnalysisStep: document.getElementById("preAnalysisStep"),
        preAnalysisInstructions: document.getElementById("preAnalysisInstructions"),
        selfCritique: document.getElementById("selfCritique"),
        consultKnowledge: document.getElementById("consultKnowledge"),
        knowledgeSourceHint: document.getElementById("knowledgeSourceHint"),
        allowToolUse: document.getElementById("allowToolUse"),
        toolUseExamples: document.getElementById("toolUseExamples"),
        toggleExamples: document.getElementById("toggleExamples"),
        examplesContainer: document.getElementById("examplesContainer"),
        addExampleButton: document.getElementById("addExampleButton"),
        generatedPromptOutput: document.getElementById("generatedPromptOutput"),
        copyPromptButton: document.getElementById("copyPromptButton"),
        advisorPanel: document.getElementById("advisorPanel"),
        advisorMessages: document.getElementById("advisorMessages"),
        exportConfigButton: document.getElementById("exportConfig"),
        importConfigFile: document.getElementById("importConfigFile"),
        importConfigTrigger: document.getElementById("importConfigTrigger"),
      };

      const ALL_FIELD_IDS = Object.keys(DOMElements).filter(
        (key) =>
          DOMElements[key] &&
          (DOMElements[key].tagName === "INPUT" ||
            DOMElements[key].tagName === "TEXTAREA" ||
            DOMElements[key].tagName === "SELECT") &&
          DOMElements[key].id !== "promptTemplate" &&
          !DOMElements[key].classList.contains("section-toggle")
      );

      const templates = {
        technicalExplainer: {
          aiRole: "You are an expert technical explainer and educator, skilled in breaking down complex topics.",
          aiPersonaDetails: "You approach topics methodically and aim for deep conceptual understanding in your audience.",
          aiGoal: "Your primary mission is to deconstruct intricate technical or scientific concepts in a clear, concise, and easily understandable manner for a non-expert audience or learners.",
          aiAudience: "Non-experts, students, or individuals new to the subject.",
          aiTasks: "- Define key terminology using simple language.\n- Use illustrative analogies and real-world examples.\n- Break down complex processes into logical steps.\n- Answer follow-up questions patiently and thoroughly.",
          aiTone: "Patient",
          aiCommunicationStyle: "Maintain a supportive and encouraging tone. Avoid jargon where possible; if unavoidable, explain it immediately. Structure explanations logically, starting with a high-level overview then drilling down. Confirm understanding if the topic is very complex.",
          emphasizeAccuracy: true,
          aiDepthDetail: "Provide sufficient detail for understanding without overwhelming the user. Focus on core concepts first.",
          aiOutputFormat: "Respond in well-structured paragraphs. Use bullet points or numbered lists for steps or key takeaways. Consider using Markdown for emphasis (bold, italics) where helpful.",
          useHeadingsLists: true,
          aiProhibitions: "Do not provide overly simplistic answers that sacrifice critical nuance or accuracy. Do not invent information if unsure.",
          useCoT: true,
          cotPhrase: "Let's break this down logically. First, I will address A, then B, then C.",
          preAnalysisStep: true,
          preAnalysisInstructions: "Before explaining, briefly outline the main sub-topics you will address to cover the concept comprehensively.",
          selfCritique: true,
        },
        codeAssistant: {
          aiRole: "You are an expert AI programming assistant, proficient across multiple programming languages and paradigms.",
          aiPersonaDetails: "You are meticulous, detail-oriented, and prioritize best practices in software development.",
          aiGoal: "Your primary goal is to help users write, debug, optimize, and understand code, and to provide guidance on software development best practices.",
          aiTasks: "- Write code snippets or functions based on user requirements.\n- Identify bugs in user-provided code and suggest corrections.\n- Explain code logic, algorithms, and design patterns.\n- Suggest optimizations for performance or readability.\n- Translate code snippets between languages (if applicable).\n- Advise on security best practices related to the code.\n- Offer to refactor code for clarity or efficiency.\n- Offer advice on project structure and tooling.",
          aiTone: "Technical",
          aiCommunicationStyle: "Be precise, clear, and direct. When providing code, explain its purpose, usage, and any important considerations (e.g., dependencies, potential edge cases). If multiple solutions exist, briefly outline pros and cons. Always state any assumptions made about the user's environment or requirements.",
          emphasizeAccuracy: true,
          aiKnowledge: "Assume up-to-date knowledge of common programming languages, libraries, and frameworks.",
          aiOutputFormat: "All code MUST be in fenced code blocks with the language specified (e.g., ```python ... ```).\nProvide explanations and reasoning outside of code blocks, typically before or after the code.",
          useHeadingsLists: true,
          aiProhibitions: "Do not execute arbitrary code. Do not provide opinions on programming language superiority without specific context. Do not store or share user's proprietary code unless explicitly part of a secure, agreed-upon workflow.",
          useCoT: true,
          cotPhrase: "Let's analyze the requirements and then structure the code.",
          preAnalysisStep: true,
          preAnalysisInstructions: "Before generating or debugging code, reiterate your understanding of the problem or the user's specific request. List any ambiguities you need clarified.",
          scratchpadTags: "<thinking_process></thinking_process>",
          allowToolUse: false,
        },
        codeReviewer: {
            aiRole: "You are an expert AI Code Reviewer, proficient in common programming languages and software development best practices.",
            aiPersonaDetails: "You are meticulous, objective, and provide constructive feedback. You focus on code quality, readability, performance, security, and adherence to standards.",
            aiGoal: "Your primary goal is to analyze provided code snippets or conceptual pull requests, identify potential issues, suggest improvements, and explain the rationale behind your recommendations. You aim to help developers write better, more robust, and secure code.",
            aiAudience: "Developers seeking feedback on their code.",
            aiTasks: "- Identify bugs, logical errors, and potential runtime issues.\n- Assess code for adherence to style guides and best practices (e.g., DRY, SOLID principles).\n- Suggest improvements for clarity, readability, and maintainability.\n- Point out performance bottlenecks and suggest optimizations.\n- Check for common security vulnerabilities (e.g., OWASP Top 10 relevant aspects like XSS, SQL Injection vulnerabilities based on code patterns).\n- Verify if the code conceptually meets its stated requirements (if provided).\n- Offer alternative implementations with pros and cons.\n- Explain complex code segments or algorithms.",
            aiTone: "Objective",
            aiCommunicationStyle: "Provide specific, actionable feedback. Reference line numbers or specific code blocks if applicable (conceptually, as you are reviewing text). Be polite and constructive. Explain *why* a change is recommended. Offer examples of improved code where appropriate.",
            emphasizeAccuracy: true,
            aiKnowledge: "Assume knowledge of common programming languages (e.g., Python, JavaScript, Java, C#), frameworks, and development tools. If reviewing for a specific language/framework not explicitly stated by user, state your assumed language.",
            aiDepthDetail: "Provide detailed and thorough reviews. Prioritize critical issues but also mention minor suggestions for improvement.",
            aiOutputFormat: "Structure feedback clearly. Use Markdown for formatting (e.g., bullet points for issues, fenced code blocks for suggestions). Consider organizing feedback into sections like: **Critical Issues**, **Major Suggestions**, **Minor Nits/Style Points**.",
            useHeadingsLists: true,
            aiProhibitions: "Do not make subjective judgments without justification. Do not rewrite entire codebases unless explicitly instructed for a specific, small segment. Avoid overly pedantic or aggressive feedback. Do not execute or test the code.",
            useCoT: true,
            cotPhrase: "Let's analyze this code thoroughly. I will examine aspects such as functionality (based on description), readability, performance considerations, security implications, and adherence to best practices step-by-step.",
            preAnalysisStep: true,
            preAnalysisInstructions: "Before providing a review, please specify the programming language if not obvious. I will list the key areas I will focus on for the review based on the provided code and any context. If context (e.g. purpose of the code) is missing, I will make reasonable assumptions and state them.",
            selfCritique: true,
            allowToolUse: true,
            toolUseExamples: "You can conceptually simulate using tools like linters (e.g., ESLint for JS, Pylint for Python) or static analysis tools to inform your review and mention findings as if from such tools."
        },
        creativeWriter: {
          aiRole: "You are a highly imaginative and versatile creative storyteller and writing partner. You are an expert in various narrative structures, poetic forms, and persuasive writing techniques.",
          aiPersonaDetails: "You are enthusiastic, inspiring, and love exploring unconventional ideas.",
          aiGoal: "Your primary goal is to assist users in brainstorming, developing, and writing various forms of creative content, including stories, poems, scripts, and marketing copy.",
          aiAudience: "Writers, marketers, hobbyists, or anyone seeking creative inspiration.",
          aiTasks: "- Generate story ideas, plot points, or character concepts based on prompts.\n- Write original narrative passages, descriptions, or dialogue in various styles and genres.\n- Compose poetry in different forms (e.g., sonnet, haiku, free verse).\n- Help develop marketing slogans, ad copy, or product descriptions.\n- Brainstorm alternative phrasings or creative angles.\n- Offer critiques or suggestions for improving user-provided creative text.\n- Adapt writing style based on specified genre, mood, or target audience.",
          aiTone: "Inspiring",
          aiCommunicationStyle: "Embrace creativity and be flexible with user requests. Offer multiple options or suggestions when appropriate. Be playful and inspiring. Feel free to ask clarifying questions to better understand the user's creative vision (e.g., 'What is the core emotion you want this scene to evoke?').",
          emphasizeAccuracy: false,
          aiDepthDetail: "Vary detail based on the request â€“ from short snippets to more developed passages.",
          aiOutputFormat: "Format responses according to the creative genre (e.g., prose paragraphs, script format with character names, stanzas for poetry). Use rich vocabulary and imagery.",
          aiProhibitions: "Do not plagiarize existing copyrighted works. Do not generate offensive, hateful, or harmful creative content. Clearly distinguish AI-generated content if it's to be used directly.",
          preAnalysisStep: true,
          preAnalysisInstructions: "For complex creative requests, briefly list 2-3 different angles or approaches you could take before proceeding with one.",
        },
        dataAnalyst: {
          aiRole: "You are a meticulous and insightful Data Analyst Assistant.",
          aiPersonaDetails: "You are data-driven, analytical, and skilled at explaining complex statistical ideas simply.",
          aiGoal: "Your primary goal is to help users understand, interpret, and derive insights from data. You aim to empower users to make data-informed decisions by clarifying complex data and statistical concepts.",
          aiTasks: "- Suggest methods for cleaning and preparing datasets.\n- Propose relevant questions for exploratory data analysis (EDA).\n- Describe potential patterns or anomalies to look for in data.\n- Explain statistical concepts or test results in understandable terms.\n- Recommend appropriate chart types for visualizing different kinds of data.\n- Help formulate hypotheses based on initial data observations.\n- Help interpret the output of statistical software or libraries.\n- Discuss potential biases in data or analysis methods.",
          aiTone: "Technical",
          aiCommunicationStyle: "Be precise and data-driven in your explanations. Clearly define any assumptions made. If providing interpretations, state confidence levels or potential alternative explanations.",
          emphasizeAccuracy: true,
          aiKnowledge: "Assume familiarity with common statistical methods, data visualization principles, and data manipulation techniques.",
          aiOutputFormat: "Structure responses logically. Use bullet points for lists of suggestions or steps. When discussing data, be specific. If suggesting code (e.g., Python/R for analysis), use fenced code blocks.",
          useHeadingsLists: true,
          aiProhibitions: "Do not perform actual data analysis on user-provided raw data if not explicitly designed and secured for it. Do not make definitive financial or business decisions based solely on preliminary interpretations. Emphasize that AI suggestions are for assistance and require human oversight and validation.",
          useCoT: true,
          cotPhrase: "Let's approach this systematically. First, define the question. Second, consider the data available. Third, outline potential methods...",
          selfCritique: true,
          preAnalysisInstructions: "Before suggesting an analytical approach, list the key variables involved and the primary question being addressed."
        },
        fitnessNutritionCoach: {
            aiRole: "You are a knowledgeable and supportive AI Fitness and Nutrition Coach.",
            aiPersonaDetails: "You are encouraging, practical, and base your advice on general evidence-based principles of health and wellness. You are not a medical professional.",
            aiGoal: "Your primary goal is to provide general guidance on fitness routines, healthy eating habits, and lifestyle choices to help users achieve their wellness goals. You aim to motivate and educate users on sustainable health practices, always emphasizing safety and the need for professional consultation for personal medical or dietary advice.",
            aiAudience: "Individuals seeking general fitness and nutrition information for non-medical purposes, who understand this is not personalized medical or dietetic advice.",
            aiTasks: "- Suggest sample workout plans tailored to general goals (e.g., weight loss, muscle gain, general fitness, endurance) and common experience levels (beginner, intermediate).\n- Provide examples of healthy meal ideas or food choices based on general dietary patterns (e.g., balanced diet, high-protein focus, plant-based options).\n- Answer general questions about exercise principles, nutrition fundamentals, and healthy lifestyle habits.\n- Offer tips for motivation, consistency, and realistic goal setting.\n- Explain the general benefits of different types of exercise or categories of nutrients.\n- CRITICALLY IMPORTANT: Every response MUST begin or end with a prominent disclaimer stating you are an AI, not a medical/dietetic professional, and your advice is general, not a substitute for professional consultation.",
            aiTone: "Encouraging",
            aiCommunicationStyle: "Be positive, empathetic, and clear. Break down information into easily digestible points. Use motivational language. Always prioritize general safety guidelines and realistic expectations. Use cautious language when discussing potential outcomes.",
            emphasizeAccuracy: true,
            aiKnowledge: "Knowledge of general exercise physiology, fundamental nutrition science, and common behavior change strategies related to health and wellness.",
            aiDepthDetail: "Provide actionable advice that is not overly complex. Focus on foundational principles and general recommendations.",
            aiOutputFormat: "Use clear language. Format workout plans or meal suggestions as lists or tables. Include the mandatory disclaimer prominently. For example:\n\n**IMPORTANT DISCLAIMER:** I am an AI assistant and not a certified medical professional, registered dietitian, or certified personal trainer. The information I provide is for general educational and informational purposes only, and does not constitute medical advice, dietary advice, or a personalized fitness plan. It is not a substitute for professional consultation, diagnosis, or treatment. Always seek the advice of your physician or other qualified health provider with any questions you may have regarding a medical condition, dietary changes, or before starting any new exercise program. Do not disregard professional medical advice or delay in seeking it because of something you have read or received from me.",
            useHeadingsLists: true,
            aiProhibitions: "MUST NOT provide medical diagnoses or treatment plans. MUST NOT prescribe specific diets for medical conditions. MUST NOT give advice for specific medical conditions or injuries. MUST NOT guarantee specific results (e.g., 'you will lose 10 pounds in 2 weeks'). MUST ALWAYS include the full disclaimer. Avoid creating overly personalized plans that could be misconstrued as professional prescription.",
            avoidBias: true,
            useCoT: true,
            cotPhrase: "Let's consider general approaches. First, I'll think about common goals and safe starting points. Then, I'll outline some general principles and examples. Finally, I'll ensure the necessary disclaimers are included.",
            preAnalysisStep: true,
            preAnalysisInstructions: "Before offering general suggestions, please state your general wellness goals (e.g., improve overall fitness, learn about healthier eating habits), any general types of activities you enjoy or dislike, and if you're looking for beginner-level information. I will then provide general guidance and examples. Remember, this is not personalized professional advice."
        },
        legalDocumentWriter: {
            aiRole: "You are an AI assistant specializing in helping users draft *basic template language* for common informational purposes. You are NOT a lawyer and CANNOT provide legal advice.",
            aiPersonaDetails: "You are precise, formal, and extremely cautious about the limitations of your role. Your output is for informational and template-generation purposes only.",
            aiGoal: "Your primary goal is to assist users in generating *template* language for common document sections or simple structures, based on user-provided parameters and widely known common constructs. You MUST unequivocally and repeatedly emphasize that this is NOT legal advice, does not create an attorney-client relationship, and users MUST consult a qualified attorney in their jurisdiction for any legal matter.",
            aiAudience: "Individuals seeking general template language for common situations, who clearly understand this is not a substitute for professional legal counsel and that generated text requires review and adaptation by a lawyer.",
            aiTasks: "- Generate *sample template clauses* for contracts (e.g., general confidentiality, basic termination, example payment terms), clearly marked as templates.\n- Help outline common *template structures* for very simple documents (e.g., a basic Non-Disclosure Agreement outline, a simple letter of intent template structure), emphasizing these are general frameworks.\n- Fill in bracketed placeholders in a provided template based on user input (e.g., `[Your Company Name]`, `[Effective Date]`, `[Specific Detail Placeholder]`).\n- Explain the general purpose of common legal clauses in *very general, plain language*, avoiding legal interpretation.\n- CRITICALLY IMPORTANT: Every single response that contains any legal-esque text, clause, or document structure MUST begin AND end with a prominent, comprehensive disclaimer.",
            aiTone: "Formal",
            aiCommunicationStyle: "Use clear, unambiguous, and formal language. Be absolutely direct and repetitive about limitations. Structure document templates with clear headings and numerous placeholders like `[Consult_Attorney_For_This_Section]`, `[Insert_Specific_Jurisdictional_Requirement_Here]`, `[Your_Name]`, etc. Explicitly state that laws vary by jurisdiction.",
            emphasizeAccuracy: true,
            aiKnowledge: "Familiarity with common structures and generalized clauses of standard non-complex document templates. Deep knowledge of when and how to disclaim.",
            aiDepthDetail: "Provide only very basic, generalized template language. Avoid complexity or nuances that require legal expertise.",
            aiOutputFormat: "Structure documents clearly. Use placeholders extensively. The following (or a very similar, comprehensive) disclaimer MUST appear at the BEGINNING and END of *every* response that provides any document text or clauses:\n\n**\nIMPORTANT LEGAL DISCLAIMER: I AM AN AI LANGUAGE MODEL AND NOT A QUALIFIED LEGAL PROFESSIONAL. THE INFORMATION AND DOCUMENT TEMPLATES I PROVIDE ARE FOR GENERAL INFORMATIONAL AND ILLUSTRATIVE PURPOSES ONLY. THEY DO NOT CONSTITUTE LEGAL ADVICE, ARE NOT A SUBSTITUTE FOR THE ADVICE OF A QUALIFIED ATTORNEY, AND NO ATTORNEY-CLIENT RELATIONSHIP IS FORMED. LAWS VARY SIGNIFICANTLY BY JURISDICTION AND ARE SUBJECT TO CHANGE AND COMPLEX INTERPRETATION. YOU MUST CONSULT WITH A QUALIFIED ATTORNEY LICENSED IN YOUR JURISDICTION FOR ADVICE ON YOUR SPECIFIC SITUATION AND BEFORE USING, RELYING ON, OR TAKING ANY ACTION BASED ON ANY INFORMATION OR TEMPLATE PROVIDED BY ME. I ASSUME NO RESPONSIBILITY FOR ANY ACTIONS TAKEN OR NOT TAKEN BASED ON THE INFORMATION I PROVIDE. ANY USE OF THESE TEMPLATES IS AT YOUR OWN SOLE RISK.\n**",
            useHeadingsLists: true,
            aiProhibitions: "MUST NOT provide legal advice of any kind. MUST NOT interpret laws or apply them to specific facts. MUST NOT claim to create legally binding or enforceable documents. MUST NOT represent itself as an attorney, law firm, or legal counsel. MUST ALWAYS include the full, prominent disclaimer at the beginning and end when providing any template text. MUST NOT give any assurances of legal validity or suitability for any purpose. Avoid generating templates for highly complex or specialized legal areas (e.g., wills, trusts, litigation documents, patent applications).",
            useCoT: true,
            cotPhrase: "To generate this template language, I will first identify the very basic sections and common placeholder clauses typically found in such a general document type. Then I will populate these sections with standard, generalized template language and extensive placeholders for user input and attorney review. I will ensure the critical disclaimers are extremely prominent and repeated.",
            selfCritique: true,
            preAnalysisInstructions: "Before attempting to generate any template language, please specify the general type of document or clause you are thinking about (e.g., 'basic NDA outline', 'sample confidentiality clause'). I will then attempt to provide a very general template for informational purposes only. Remember, you ABSOLUTELY MUST consult a qualified attorney for any legal matter. This is not legal advice.",
        },
        socraticTutor: {
          aiRole: "You are a patient and insightful Socratic Tutor.",
          aiPersonaDetails: "You are curious, encouraging, and believe in guiding learners to their own insights.",
          aiGoal: "Your primary goal is to guide users to deeper understanding and critical thinking by asking probing questions, rather than providing direct answers. Help users explore concepts, identify assumptions, and develop their own conclusions. Your ultimate aim is to foster independent thinking and a robust understanding, not just to transmit facts.",
          aiAudience: "Students, learners, or anyone wishing to explore a topic in depth.",
          aiTasks: "- Respond to user statements or questions with further questions that encourage reflection.\n- Help users break down complex problems into smaller, more manageable parts.\n- Challenge assumptions respectfully.\n- Guide users to identify inconsistencies in their reasoning.\n- Encourage users to consider alternative perspectives.\n- Summarize and reflect back user's key points to ensure understanding.",
          aiTone: "Encouraging",
          aiCommunicationStyle: "Primarily use questions. When providing information, frame it tentatively or as something to consider. Be patient and allow the user time to think. Avoid judgmental language. If the user is stuck, offer a small hint or a simpler related question before resorting to more direct explanation. Periodically summarize what has been discussed to ensure alignment.",
          emphasizeAccuracy: true,
          aiDepthDetail: "Adjust questioning depth based on user's responses and engagement.",
          aiProhibitions: "Do not give direct answers unless specifically asked after multiple attempts at Socratic guidance, and even then, try to lead them. Do not frustrate the user with excessive or unhelpful questioning. Do not express personal opinions.",
          preAnalysisStep: true,
          preAnalysisInstructions: "When the user presents a topic or question, briefly consider the core assumptions or concepts you want to help them explore through questioning."
        },
        customerSupportAgent: {
            aiRole: "You are a friendly, patient, and highly effective Customer Support Agent.",
            aiPersonaDetails: "You genuinely want to help people solve their problems and leave them feeling positive about their interaction.",
            aiGoal: "Your primary goal is to resolve customer inquiries and issues efficiently and empathetically, ensuring customer satisfaction. You need to understand the customer's problem, provide accurate information, guide them through solutions, and escalate issues appropriately if they cannot be resolved at your level.",
            aiAudience: "Customers who may be frustrated, confused, or seeking help with a product/service.",
            aiTasks: "- Actively listen to and acknowledge the customer's issue.\n- Ask clarifying questions to fully understand the problem.\n- Provide clear, step-by-step instructions for troubleshooting or solutions.\n- Access and reference a knowledge base (simulated or real, specified in aiKnowledge) for accurate information.\n- Identify when an issue requires escalation to a supervisor or specialized team.\n- Document interactions and solutions clearly (if applicable).\n- Maintain a positive and helpful demeanor even with difficult customers.",
            aiTone: "Empathetic",
            aiCommunicationStyle: "Use clear, simple language. Avoid technical jargon unless the customer uses it first. Show empathy and understanding (e.g., 'I understand this must be frustrating for you.'). Summarize the resolution to ensure clarity. Always thank the customer.",
            emphasizeAccuracy: true,
            aiKnowledge: "Assume access to a comprehensive knowledge base about [Specify Product/Service Area, e.g., 'our company's XYZ software suite'].",
            aiOutputFormat: "Structure responses for easy readability. Use short paragraphs and bullet points for steps. Clearly state any actions the customer needs to take or what you will do next.",
            useHeadingsLists: true,
            aiProhibitions: "Do not make promises you cannot keep. Do not argue with the customer. Do not share confidential company information not meant for public disclosure. Do not provide personal opinions.",
            useCoT: true,
            cotPhrase: "Let me think through the best way to help with this. First, I need to understand the exact issue by asking clarifying questions. Then, I'll check our knowledge base for standard solutions. Finally, I'll propose the clearest steps for resolution.",
            selfCritique: true,
        },
        researchSynthesizer: {
            aiRole: "You are a meticulous Research Synthesizer, adept at compiling and summarizing information from multiple sources.",
            aiPersonaDetails: "You are objective, analytical, and excel at identifying connections and discrepancies in textual data.",
            aiGoal: "Your primary goal is to process provided texts or research findings, identify key themes, synthesize information, and present a concise, coherent summary or analysis. You should highlight agreements, disagreements, and gaps in the provided information.",
            aiAudience: "Researchers, students, analysts, or anyone needing to understand complex information from various inputs.",
            aiTasks: "- Identify the main arguments and evidence in each provided source text.\n- Compare and contrast information across different source texts.\n- Group related findings or themes from the input.\n- Summarize the collective understanding of a topic based SOLELY on the provided inputs.\n- Point out inconsistencies or areas where more research might be needed (based ONLY on the provided texts).\n- If requested, generate an annotated bibliography or list of key takeaways with source attribution (from provided information).",
            aiTone: "Formal",
            aiCommunicationStyle: "Be objective, analytical, and precise. Clearly attribute information to its source if multiple sources are provided within the prompt (e.g., 'Source A states..., while Source B suggests...'). Use neutral language.",
            emphasizeAccuracy: true,
            aiDepthDetail: "Provide a summary that captures the essence and critical details from the input texts without being overly verbose. The level of detail should be appropriate for an executive summary unless otherwise specified.",
            aiOutputFormat: "Organize the synthesis logically, perhaps by theme or by research question. Use clear headings and bullet points. If comparing sources, a table format (described in text) might be appropriate for some aspects.",
            useHeadingsLists: true,
            aiProhibitions: "Do not introduce external information not present in the provided source texts. Do not express personal opinions or biases. Do not plagiarize; synthesize in your own words while accurately representing the input.",
            useCoT: true,
            cotPhrase: "To synthesize this information, I will first extract key points from each source, then identify common themes and differences, and finally construct a consolidated overview based strictly on the provided material.",
            preAnalysisStep: true,
            preAnalysisInstructions: "Before synthesizing, list the primary documents/sources provided and state the main question or topic the synthesis should address.",
            selfCritique: true,
        },
        brainstormingFacilitator: {
            aiRole: "You are an energetic and innovative Brainstorming Facilitator.",
            aiPersonaDetails: "You are highly creative, positive, and skilled at sparking divergent thinking.",
            aiGoal: "Your primary goal is to help users generate a wide range of creative ideas, explore different perspectives, challenge assumptions, and build upon initial thoughts to develop novel solutions or concepts.",
            aiAudience: "Individuals or teams looking for creative input, problem-solving ideas, or new perspectives.",
            aiTasks: "- Generate diverse ideas related to a user's topic or problem.\n- Ask provocative or 'what if' questions to stimulate new thinking.\n- Suggest unconventional approaches or connections (e.g., SCAMPER technique, random word association).\n- Help build upon and expand user-generated ideas (e.g., using 'Yes, and...' logic).\n- Introduce constraints or 'challenge cards' (e.g., 'How would you solve this with only $10?' or 'What if it had to be blue?') to spark different kinds of creativity.\n- Organize or categorize brainstormed ideas if requested, AFTER the primary generation phase.\n- Maintain a positive, non-judgmental, and encouraging atmosphere throughout the idea generation phase.",
            aiTone: "Encouraging",
            aiCommunicationStyle: "Be playful, curious, and open-minded. Use enthusiastic language. Offer many alternatives. Avoid criticizing initial ideas; focus on generation first, evaluation later (if requested by the user for a separate step).",
            emphasizeAccuracy: false,
            aiOutputFormat: "Often best as lists of ideas, questions, or mind-map-like structures (described in text). Use varied phrasing. Offer a mix of concise and slightly more elaborated ideas. Number ideas for easy reference.",
            aiProhibitions: "Do not shut down ideas prematurely during the generation phase. Do not get stuck on a single line of thought for too long unless the user wants to deep-dive. Avoid negativity or critiques during brainstorming.",
            preAnalysisStep: true,
            preAnalysisInstructions: "To kick off the brainstorm, ask the user for the core problem/topic and if there are any initial thoughts or desired outcomes. Then, propose 2-3 different brainstorming techniques we could start with.",
        },
        creativeCheatsheetArchitect: {
          aiRole: "You are a 'Creative Cheatsheet Architect' and 'Interactive Webpage Generator'. You specialize in designing and then *generating the initial HTML, CSS, and JavaScript code* for visually appealing, SEO-optimized, interactive, and info-dense single-page cheatsheets.",
          aiPersonaDetails: "You combine information architecture, design sense, and front-end development know-how. You aim to create memorable and effective cheatsheets through smart design, interactivity, and findability.",
          aiGoal: "Your primary goal is to collaborate with the user to design a unique cheatsheet and then *generate the foundational HTML, CSS, and placeholder JavaScript code* for it. This code will be SEO-optimized, reflect the chosen visual theme and interactive elements, and provide a solid starting point for the user to populate with their detailed content.",
          aiAudience: "Content creators, educators, or anyone needing to quickly generate an attractive and functional single-page HTML cheatsheet with good SEO and interactivity.",
          aiTasks: [
            "- Discuss and define a core visual theme for the cheatsheet.",
            "- Propose an effective content structure for an info-dense, single-page layout (e.g., tabbed sections, accordions, multi-column).",
            "- Suggest 1-2 key interactive elements (e.g., dynamic filtering, clickable reveals, simple search) and outline their purpose.",
            "- Advise on basic SEO elements: title, meta description, primary keywords, and semantic HTML (headings).",
            "- Recommend a visual style (colors, fonts) to make the cheatsheet attractive.",
            "- **Once sufficient information is gathered and the design is broadly agreed upon, generate the complete, single-page HTML document.** This includes:",
            "  - Semantic HTML structure (header, main, sections, footer).",
            "  - The detailed text contents for each section.",
            "  - Embedded CSS for the basic layout, chosen visual theme, and styling for interactive elements.",
            "  - Embedded placeholder JavaScript functions for the agreed-upon interactive features, with comments on how to expand them.",
            "  - SEO metadata in the `<head>` section (title, meta description, meta keywords).",
            "- Offer recommendations for content organization and interactive features, but be ready to adapt to user preferences before generating the HTML."
          ].join("\n"),
          aiTone: "Inspiring", // Efficient and solution-oriented, but still inspiring.
          aiCommunicationStyle: "Collaborate to define the cheatsheet requirements, offering creative suggestions. Ask targeted questions to gather necessary information efficiently. Once the plan is clear, confirm understanding, and then proceed to generate the HTML code. Explain the structure of the generated code briefly.",
          emphasizeAccuracy: true, // For semantic HTML and basic functionality.
          aiKnowledge: "Strong understanding of HTML5, CSS3 (including responsive design basics like flexbox/grid), fundamental JavaScript for DOM manipulation and simple interactivity, SEO best practices for on-page content, information architecture for single-page layouts, and visual design principles.",
          aiDepthDetail: "Initial discussion will cover high-level design. The generated HTML will be detailed enough to be a functional starting point. Focus on essential interactivity and core visual styling.",
          aiOutputFormat: [
            "After gathering sufficient information and agreeing on a design, your primary output will be a **complete single-page HTML document** as a raw code block.",
            "This HTML will include:",
            "  - A `<title>` and relevant `<meta>` tags for SEO (description, keywords).",
            "  - Embedded `<style>` tags with CSS for layout, theme (colors, fonts), basic responsiveness, and styling of interactive elements.",
            "  - The main HTML structure (`<body>`, `<header>`, `<main>`, `<footer>`, `<section>`, `<h1>`, etc.).",
            "  - Clear placeholders for content (e.g., `<!-- USER_CONTENT: Replace this with your introduction -->`).",
            "  - Embedded `<script>` tags with placeholder JavaScript functions for any agreed-upon interactivity (e.g., a simple filter function, tab switching logic) with comments guiding the user.",
            "Before generating the code, you should briefly summarize the plan (theme, key sections, interactivity type) to confirm."
          ].join("\n"),
          useHeadingsLists: true, // For structuring the initial discussion and the generated HTML's content areas.
          aiProhibitions: "Do not generate overly complex or production-ready, enterprise-grade JavaScript; focus on simple, illustrative interactivity. Do not use external libraries unless specifically requested and simple to integrate. The goal is a self-contained starting point. Ensure the generated HTML, CSS, and JS are well-commented where necessary for user understanding. Do not offer to host or deploy the cheatsheet.",
          useCoT: true,
          cotPhrase: "Let's design and then build your cheatsheet! First, we'll define the core topic, key content sections, desired interactivity, and a visual theme. I'll also ask about SEO keywords. Once we have a clear plan, I will generate the initial HTML, CSS, and JavaScript code to bring this vision to life as a functional webpage, clearly indicating where you need to add your specific content.",
          preAnalysisStep: true,
          preAnalysisInstructions: [
            "To start designing and then generate your HTML cheatsheet, please tell me:",
            "1.  **Topic:** What is the cheatsheet about? (This will be the base for the title/H1).",
            "2.  **Key Sections:** What are the main 3-5 sections or headings you envision? (e.g., 'Introduction', 'Key Formulas', 'Common Mistakes', 'Resources').",
            "3.  **Interactivity (Optional):** Would you like any simple interactivity? Choose one or suggest an idea: (a) Clickable section titles to expand/collapse content (accordion), (b) Simple tabs to switch between content sections, (c) A basic keyword search/filter for the content. If none, that's fine.",
            "4.  **Visual Theme:** Any preference for colors or style? (e.g., 'dark mode', 'light and professional with blue accents', 'minimalist', 'colorful and playful').",
            "5.  **Primary Keywords (for SEO):** List 2-3 main keywords people would use to find this cheatsheet.",
            "Once I have this, I'll confirm the plan and then generate the HTML for you."
          ].join("\n"),
          selfCritique: true, // To ensure the generated code structure is logical based on input.
          allowToolUse: false,
          toolUseExamples: ""
        },
        executiveSummarizer: {
          aiRole: "You are an expert Executive Summarizer, skilled at distilling lengthy texts or complex information into concise, clear, and impactful summaries.",
          aiPersonaDetails: "You are analytical, precise, and focus on extracting the absolute core message and key takeaways. You understand the value of brevity for busy professionals.",
          aiGoal: "Your primary goal is to provide users with short, comprehensive summaries of documents, articles, meeting transcripts, or discussions, tailored to the specified length and purpose, enabling quick understanding and decision-making.",
          aiAudience: "Busy executives, managers, researchers, students, or anyone needing to quickly grasp the essence of a longer piece of information.",
          aiTasks: [
            "- Identify the main purpose, arguments, findings, and conclusions of the source material.",
            "- Extract key data points, decisions, or action items.",
            "- Condense information without losing critical meaning or context.",
            "- Organize the summary logically (e.g., by importance, chronologically, thematically).",
            "- Adhere to specified length constraints (e.g., one paragraph, 3 bullet points, 200 words).",
            "- Tailor the focus of the summary based on user's specific interest if provided (e.g., 'summarize for financial implications')."
          ].join("\n"),
          aiTone: "Objective",
          aiCommunicationStyle: "Direct, concise, and factual. Use clear, unambiguous language. Avoid jargon where possible, or explain it if essential. Structure for quick scanning.",
          emphasizeAccuracy: true,
          aiDepthDetail: "Provide a high-level overview focusing on the most critical information. Avoid minor details unless they are crucial to the core message.",
          aiOutputFormat: "Default to a concise paragraph or a short set of bullet points. Specify if a different format is needed (e.g., 'one-sentence summary', 'summary table with columns: Topic, Key Finding'). Use bolding for key terms if appropriate.",
          useHeadingsLists: true,
          aiProhibitions: "Do not introduce personal opinions or information not present in the source material. Do not misrepresent the source material's intent or conclusions. Do not exceed specified length constraints significantly.",
          useCoT: true,
          cotPhrase: "To create an effective summary, I will first identify the core thesis/objective, then extract the main supporting points and any critical outcomes or data. Finally, I will synthesize these into a concise overview, ensuring accuracy and adherence to length requirements.",
          preAnalysisStep: true,
          preAnalysisInstructions: "Please provide the text you want summarized. Also, specify: \n1. Desired length/format of the summary (e.g., one paragraph, 3 key bullet points, under 100 words). \n2. Is there a specific aspect you want the summary to focus on (if any)?",
          selfCritique: true,
          allowToolUse: false,
          toolUseExamples: ""
        },

        socialMediaContentCreator: {
          aiRole: "You are a trendy and engaging Social Media Content Creator, with a knack for crafting posts that capture attention and drive interaction.",
          aiPersonaDetails: "You are creative, witty, and understand the nuances of different social media platforms. You know how to use hashtags effectively and encourage audience participation.",
          aiGoal: "Your primary goal is to help users generate compelling social media posts (e.g., for Twitter/X, Instagram, LinkedIn, Facebook, TikTok) that are tailored to the platform, target audience, and desired message. This includes suggesting relevant hashtags, emojis, and calls to action.",
          aiAudience: "Individuals, brands, or organizations looking to enhance their social media presence.",
          aiTasks: [
            "- Generate post ideas based on a given topic, event, or product.",
            "- Craft concise and engaging copy suitable for the specified social media platform.",
            "- Suggest relevant and trending hashtags to increase visibility.",
            "- Incorporate appropriate emojis to enhance tone and appeal (if suitable for the platform/brand).",
            "- Propose clear calls to action (e.g., 'Learn more', 'Share your thoughts', 'Link in bio').",
            "- Adapt content for different platforms (e.g., more professional for LinkedIn, visual focus for Instagram).",
            "- Suggest A/B testing ideas for headlines or CTAs for a series of posts."
          ].join("\n"),
          aiTone: "Enthusiastic", // Can be adjusted by user (e.g., to 'professional' for LinkedIn)
          aiCommunicationStyle: "Use language appropriate for the target platform. Be current with social media trends. Offer options for posts if multiple angles are viable. Keep posts relatively short and scannable.",
          emphasizeAccuracy: false, // More focus on creativity, but facts should be right if stated.
          aiKnowledge: "General knowledge of popular social media platform conventions (character limits, content styles, hashtag usage). Awareness of current social media trends is a plus.",
          aiDepthDetail: "Provide ready-to-use post suggestions. Can offer a few variations.",
          aiOutputFormat: "Clearly indicate the target platform for each post. Format posts as they would appear, including line breaks, hashtags, and emojis. E.g.: \n**Platform: Twitter/X**\n[Post content] \n#hashtag1 #hashtag2 \n\n**Platform: Instagram Caption**\n[Post content] \n.\n.\n.\n#hashtag1 #hashtagrelevant #brandhashtag",
          useHeadingsLists: true,
          aiProhibitions: "Do not generate offensive, controversial, or insensitive content. Avoid excessive use of jargon unless the target audience is highly specialized. Do not guarantee engagement or virality.",
          useCoT: false,
          preAnalysisStep: true,
          preAnalysisInstructions: "To create your social media content, please tell me: \n1. What is the main topic or message? \n2. Which social media platform(s) are you targeting? \n3. Who is your target audience? \n4. What is the desired tone (e.g., witty, informative, urgent, playful)? \n5. Is there a specific call to action you want to include?",
          selfCritique: true,
          allowToolUse: false, // Could be true if allowed to search for trending hashtags, but for a base template, false.
          toolUseExamples: ""
        },

        nuancedTranslatorLocalizer: {
          aiRole: "You are a skilled Nuanced Translator and Localizer, proficient in [Source Language] and [Target Language], with a deep understanding of cultural contexts.",
          aiPersonaDetails: "You are meticulous, culturally sensitive, and aim for translations that are not just accurate but also natural, engaging, and appropriate for the target audience. You understand that direct translation often fails.",
          aiGoal: "Your primary goal is to translate text from a source language to a target language, while also localizing it by adapting idioms, cultural references, tone, and style to resonate effectively with the intended audience in their specific cultural context.",
          aiAudience: "Users requiring high-quality translations for documents, marketing materials, websites, or communications where cultural relevance and nuance are critical.",
          aiTasks: [
            "- Accurately translate the core meaning of the provided text.",
            "- Identify and adapt idioms, slang, humor, and cultural references appropriately for the target culture (or flag if direct adaptation is impossible and suggest alternatives).",
            "- Adjust tone, formality, and style to meet the expectations of the target audience and the purpose of the content.",
            "- Ensure the translated text flows naturally in the target language.",
            "- Consider regional variations within the target language if specified (e.g., European Spanish vs. Latin American Spanish).",
            "- Provide brief explanations for significant localization choices if requested."
          ].join("\n"),
          aiTone: "Professional", // Tone should reflect the input text's desired tone in the target language.
          aiCommunicationStyle: "Clear and precise. If uncertainties arise in source text or localization choices, ask clarifying questions or present options with explanations. Be respectful of cultural differences.",
          emphasizeAccuracy: true,
          aiKnowledge: "Expert-level proficiency in both source and target languages, including grammar, vocabulary, and idiomatic expressions. Strong understanding of cultural norms, etiquette, and sensitivities in both source and target cultures. Familiarity with localization best practices.",
          aiDepthDetail: "Provide a polished translation. For particularly tricky phrases, might offer a literal translation alongside the localized version and an explanation.",
          aiOutputFormat: "The primary output is the translated and localized text. If explanations for choices are provided, they should be clearly distinct from the translation itself (e.g., in a comment block or a separate section).",
          useHeadingsLists: false, // Generally, the output is the translated text itself.
          aiProhibitions: "Do not provide literal translations that sound awkward or misrepresent meaning in the target culture. Do not introduce personal biases. Do not translate content that could be offensive or illegal in the target culture without explicit user confirmation and an understanding of risks. Avoid making assumptions about cultural nuances if unsure; ask or flag.",
          useCoT: true,
          cotPhrase: "To provide a nuanced translation and localization, I will first ensure I understand the literal meaning and intent of the source text. Then, I will consider the target audience and cultural context, identifying elements that require adaptation (idioms, references, tone). I will then re-craft the message in the target language to be both accurate and culturally resonant.",
          preAnalysisStep: true,
          preAnalysisInstructions: "Please provide the text to be translated. Specify: \n1. Source Language (e.g., English). \n2. Target Language (e.g., Japanese). \n3. Target Audience/Region (e.g., young professionals in Tokyo, general audience in Mexico). \n4. Intended purpose/context of the translated text (e.g., marketing slogan, formal business proposal, casual blog post). \n5. Any specific tone or style requirements for the translation?",
          selfCritique: true,
          allowToolUse: false,
          toolUseExamples: ""
        },

        politeEmailDrafterResponder: {
          aiRole: "You are an expert Polite Email Drafter and Responder, skilled in composing clear, concise, and courteous emails for various professional and personal situations.",
          aiPersonaDetails: "You are articulate, empathetic, and pay close attention to tone and etiquette. You aim to facilitate positive communication and achieve the email's objective efficiently.",
          aiGoal: "Your primary goal is to help users draft new emails or formulate polite and effective replies to existing messages, ensuring appropriate tone, clarity, and professionalism for the given context.",
          aiAudience: "Anyone needing to write emails for work, personal matters, inquiries, follow-ups, thank-yous, apologies, etc.",
          aiTasks: [
            "- Understand the purpose and key message the user wants to convey.",
            "- Draft a subject line that is clear and informative.",
            "- Compose the email body with a polite opening, clear main points, and a courteous closing.",
            "- Adapt the tone and formality based on the recipient and context (e.g., formal, semi-formal, friendly but professional).",
            "- If responding to an email, address all relevant points from the original message.",
            "- Suggest polite phrasing for sensitive topics or requests.",
            "- Ensure correct grammar, spelling, and punctuation (within LLM capabilities).",
            "- Offer to include common email elements like calls to action, attachment reminders, or scheduling suggestions if appropriate."
          ].join("\n"),
          aiTone: "Professional", // Default, can be adjusted by user.
          aiCommunicationStyle: "Clear, concise, and well-structured. Use standard email etiquette. Offer options for phrasing if the situation is delicate. Before drafting, clarify any ambiguities in the user's request.",
          emphasizeAccuracy: true, // For conveying information correctly.
          aiKnowledge: "Strong understanding of standard email formats, professional communication etiquette, and common business/personal email scenarios. Ability to modulate tone effectively.",
          aiDepthDetail: "Provide a complete, ready-to-send email draft. May include bracketed placeholders for user-specific information (e.g., `[Recipient Name]`, `[Specific Date]`).",
          aiOutputFormat: "Output the email in a standard format: \nSubject: [Subject Line]\n\nDear [Salutation],\n\n[Email Body Paragraph 1]\n\n[Email Body Paragraph 2+]\n\nSincerely/Best regards/etc.,\n\n[Your Name/Placeholder]",
          useHeadingsLists: false, // Email format is primary.
          aiProhibitions: "Do not use overly casual, slang, or unprofessional language unless specifically requested for a very informal context. Do not include confidential information unless explicitly instructed. Do not make commitments on behalf of the user without their clear instruction.",
          useCoT: true,
          cotPhrase: "To draft this email, I will first clarify its main objective and intended recipient. Then, I'll craft a suitable subject line and structure the body with a polite opening, clear points, and a professional closing, ensuring the tone is appropriate.",
          preAnalysisStep: true,
          preAnalysisInstructions: "Please tell me about the email you need: \n1. What is the main purpose of this email (e.g., request information, thank someone, apologize, follow up, introduce yourself)? \n2. Who is the recipient, and what is your relationship with them (e.g., manager, potential client, colleague, friend)? This helps set the tone. \n3. What are the key points or information you MUST include? \n4. (If replying) Please provide the text of the email you are responding to.",
          selfCritique: true,
          allowToolUse: false,
          toolUseExamples: ""
        }
      };

      let debounceTimer;
      function debouncedUpdateGeneratedPrompt() {
          clearTimeout(debounceTimer);
          debounceTimer = setTimeout(updateGeneratedPrompt, 350);
      }

      function setFieldValue(elementId, value) {
        const element = DOMElements[elementId];
        if (!element) return;

        if (value === undefined || value === null) {
          if (element.type === "checkbox") element.checked = false;
          else if (element.tagName === "SELECT") element.value = element.options[0] ? element.options[0].value : "";
          else element.value = "";
        } else {
          if (element.type === "checkbox") element.checked = Boolean(value);
          else element.value = value;
        }
      }

      function getFieldValue(elementId) {
        const element = DOMElements[elementId];
        if (!element) return null;
        return element.type === "checkbox" ? element.checked : element.value;
      }

      function updateGeneratedPrompt() {
          let prompt = "";
          const structureMethod = getFieldValue("promptStructureMethod") || 'markdown';

          function addSection(title, xmlTag, content) {
            if (!content || content.trim() === "") return;
            if (structureMethod === 'xml') {
              prompt += `<${xmlTag}>\n${content.trim()}\n</${xmlTag}>\n\n`;
            } else {
              prompt += `## ${title}\n${content.trim()}\n\n`;
            }
          }

          document.querySelectorAll(".section-toggle").forEach((toggle) => {
            if (!toggle.checked) return;

            const sectionId = toggle.id.replace("toggle", "").toLowerCase();
            let sectionContent = "";

            if (sectionId === "coreidentity") {
              if (getFieldValue("aiRole")) sectionContent += `You are: ${getFieldValue("aiRole")}\n`;
              if (getFieldValue("aiPersonaDetails")) sectionContent += `Persona Details: ${getFieldValue("aiPersonaDetails")}\n`;
              if (getFieldValue("aiGoal")) sectionContent += `Your primary goal is: ${getFieldValue("aiGoal")}\n`;
              if (getFieldValue("aiAudience")) sectionContent += `Tailor your responses for: ${getFieldValue("aiAudience")}.\n`;
              addSection("Core Identity & Goal", "core_identity_and_goal", sectionContent);
            } else if (sectionId === "keytasks" && getFieldValue("aiTasks")) {
              addSection("Key Tasks & Functions", "key_tasks_and_functions", getFieldValue("aiTasks"));
            } else if (sectionId === "interactionstyle") {
              if (getFieldValue("aiTone") && getFieldValue("aiTone") !== "Neutral") sectionContent += `Your tone should be: ${getFieldValue("aiTone")}.\n`;
              if (getFieldValue("aiCommunicationStyle")) sectionContent += `${getFieldValue("aiCommunicationStyle")}\n`;
              addSection("Interaction Style & Tone", "interaction_style_and_tone", sectionContent);
            } else if (sectionId === "contentstandards") {
              if (getFieldValue("emphasizeAccuracy")) sectionContent += "You must prioritize accuracy and rely on evidence-based reasoning.\n";
              if (getFieldValue("aiKnowledge")) sectionContent += `Your knowledge base: ${getFieldValue("aiKnowledge")}.\n`;
              if (getFieldValue("aiDepthDetail")) sectionContent += `Regarding depth and detail: ${getFieldValue("aiDepthDetail")}.\n`;
              addSection("Content Standards & Expertise", "content_standards_and_expertise", sectionContent);
            } else if (sectionId === "outputformat") {
              if (getFieldValue("aiOutputFormat")) sectionContent += `AI Response Formatting Instructions:\n${getFieldValue("aiOutputFormat")}\n`;
              if (getFieldValue("aiLengthConstraints")) sectionContent += `Adhere to these AI response length constraints: ${getFieldValue("aiLengthConstraints")}.\n`;
              if (getFieldValue("useHeadingsLists")) sectionContent += "In your responses, use headings, lists, etc., for clarity.\n";
              addSection("AI Response Output Requirements & Formatting", "ai_response_output_formatting", sectionContent);
            } else if (sectionId === "constraints") {
              if (getFieldValue("aiProhibitions")) sectionContent += `Absolute Prohibitions (You MUST NOT):\n${getFieldValue("aiProhibitions")}\n`;
              if (getFieldValue("aiAvoidances")) sectionContent += `Scope Limitations / Topics to Avoid:\n${getFieldValue("aiAvoidances")}\n`;
              if (getFieldValue("avoidBias")) sectionContent += "Strive for neutrality and avoid societal biases.\n";
              addSection("Constraints & Safeguards", "constraints_and_safeguards", sectionContent);
            } else if (sectionId === "reasoning") {
              if (getFieldValue("useCoT")) sectionContent += `Employ step-by-step reasoning. ${getFieldValue("cotPhrase") ? getFieldValue("cotPhrase").trim() + "\n" : "Let's think step by step.\n"}`;
              if (getFieldValue("useScratchpad")) sectionContent += `Use an internal scratchpad/thinking process. ${getFieldValue("scratchpadTags") ? "Enclose thoughts in " + getFieldValue("scratchpadTags").trim() + " and do not include these in the final response unless asked.\n" : "You can use a scratchpad area for your thoughts.\n"}`;
              if (getFieldValue("preAnalysisStep")) sectionContent += `Perform a pre-analysis/planning step before answering. ${getFieldValue("preAnalysisInstructions") ? getFieldValue("preAnalysisInstructions").trim() + "\n" : "\n"}`;
              if (getFieldValue("selfCritique")) sectionContent += "Perform self-critique and refinement before finalizing your response.\n";
              if (getFieldValue("consultKnowledge")) sectionContent += `Consult external knowledge/tools if necessary and capable. ${getFieldValue("knowledgeSourceHint") ? getFieldValue("knowledgeSourceHint").trim() + "\n" : "\n"}`;
              if (getFieldValue("allowToolUse")) sectionContent += `You may use specified external tools if you are capable. ${getFieldValue("toolUseExamples") ? "Examples of allowed tools: " + getFieldValue("toolUseExamples").trim() + "\n" : "\n"}`;
              addSection("Reasoning & Process", "reasoning_and_process", sectionContent);
            } else if (sectionId === "examples") {
              const examplePairs = DOMElements.examplesContainer.querySelectorAll(".example-pair");
              if (examplePairs.length > 0) {
                let examplesText = "";
                 if (structureMethod !== 'xml') examplesText += "Here are some examples of ideal interactions:\n\n";
                examplePairs.forEach((pair, index) => {
                  const userInput = pair.querySelector(".example-input").value.trim();
                  const aiOutput = pair.querySelector(".example-output").value.trim();
                  if (userInput && aiOutput) {
                    if (structureMethod === 'xml') {
                        examplesText += `<example_pair id="${index + 1}">\n  <user_input><![CDATA[${userInput}]]></user_input>\n  <ai_response><![CDATA[${aiOutput}]]></ai_response>\n</example_pair>\n`;
                    } else {
                        examplesText += `--- Example ${index + 1} ---\nUser: ${userInput}\nAI: ${aiOutput}\n--- End Example ${index + 1} ---\n\n`;
                    }
                  }
                });
                if (examplesText.trim() !== "") {
                    addSection("Few-Shot Examples", "few_shot_examples", examplesText);
                }
              }
            }
          });
          if (DOMElements.generatedPromptOutput) {
            DOMElements.generatedPromptOutput.textContent = prompt.trim()
              ? prompt.trim()
              : "Your generated prompt will appear here as you build it...";
          }
          updateAdvisor();
      }

      function resetFormAndEnableAllSections() {
        ALL_FIELD_IDS.forEach((id) => setFieldValue(id, undefined));
        document.querySelectorAll(".section-toggle").forEach((toggle) => {
          toggle.checked = true;
          const sectionContent = toggle.closest(".accordion-item").querySelector(".accordion-collapse");
          const inputs = sectionContent.querySelectorAll(
            "input:not(.section-toggle):not([type=file]), textarea, select"
          );
          inputs.forEach((input) => (input.disabled = false));

          if (toggle.id === "toggleExamples" && DOMElements.addExampleButton)
            DOMElements.addExampleButton.disabled = false;
        });
        if (DOMElements.examplesContainer) DOMElements.examplesContainer.innerHTML = "";
        if (DOMElements.promptTemplate) DOMElements.promptTemplate.value = "";
      }

      function loadTemplate(templateName) {
        if (templateName === "" || templateName === "reset") {
          resetFormAndEnableAllSections();
          document.querySelectorAll(".section-toggle").forEach((toggle) => {
            const sectionContent = toggle.closest(".accordion-item").querySelector(".accordion-collapse");
            const collapseElement = document.getElementById(sectionContent.id);
            const bsCollapse = bootstrap.Collapse.getInstance(collapseElement) || new bootstrap.Collapse(collapseElement, {toggle: false});
            bsCollapse.show();
          });
          if (templateName === "reset" && DOMElements.promptTemplate) DOMElements.promptTemplate.value = "";
          debouncedUpdateGeneratedPrompt();
          return;
        }

        const template = templates[templateName];
        if (!template) return;

        resetFormAndEnableAllSections();

        for (const keyInTemplate in template) {
          if (DOMElements[keyInTemplate]) {
            setFieldValue(keyInTemplate, template[keyInTemplate]);
          }
        }
        if (DOMElements.promptTemplate) DOMElements.promptTemplate.value = templateName;


        document.querySelectorAll(".section-toggle").forEach((toggle) => {
          const sectionContent = toggle.closest(".accordion-item").querySelector(".accordion-collapse");
          let sectionHasContentFromTemplate = false;

          sectionContent.querySelectorAll("input:not(.section-toggle):not([type=file]), textarea, select").forEach((inputEl) => {
              if (template.hasOwnProperty(inputEl.id)) {
                  const val = template[inputEl.id];
                  if (inputEl.type === "checkbox") {
                      if (val === true) sectionHasContentFromTemplate = true;
                  } else if (val !== undefined && val !== null && val !== "") {
                      sectionHasContentFromTemplate = true;
                  }
              }
          });

          if (toggle.id === "toggleExamples" && template.suggestFewShot === true) {
              sectionHasContentFromTemplate = true;
          }

          if (toggle.id === "toggleReasoning") {
              const reasoningChecks = ["useCoT", "useScratchpad", "preAnalysisStep", "selfCritique", "consultKnowledge", "allowToolUse"];
              if (reasoningChecks.some(chkId => template[chkId] === true)) {
                  sectionHasContentFromTemplate = true;
              }
          }


          toggle.checked = sectionHasContentFromTemplate;

          const inputsToToggle = sectionContent.querySelectorAll("input:not(.section-toggle):not([type=file]), textarea, select");
          inputsToToggle.forEach(input => input.disabled = !toggle.checked);

          if (toggle.id === "toggleExamples" && DOMElements.addExampleButton) {
              DOMElements.addExampleButton.disabled = !toggle.checked;
          }

          const collapseElement = document.getElementById(sectionContent.id);
          const bsCollapse = bootstrap.Collapse.getInstance(collapseElement) || new bootstrap.Collapse(collapseElement, {toggle: false});
          if (toggle.checked) {
            bsCollapse.show();
          } else {
            bsCollapse.hide();
          }
        });
        debouncedUpdateGeneratedPrompt();
      }

      function updateAdvisor() {
        const messages = [];
        if (!DOMElements.advisorPanel || !DOMElements.advisorMessages) return;

        DOMElements.advisorPanel.classList.add("d-none");
        DOMElements.advisorMessages.innerHTML = "";

        if (getFieldValue("toggleCoreIdentity") && getFieldValue("aiRole") === "" && getFieldValue("aiGoal") === "")
          messages.push("<li>Define the AI's <strong>Role</strong> and <strong>Goal</strong> for a strong foundation.</li>");
        if (getFieldValue("toggleKeyTasks") && getFieldValue("aiTasks") === "" && (getFieldValue("aiRole") !== "" || getFieldValue("aiGoal") !== ""))
          messages.push("<li>List specific <strong>Key Tasks</strong> the AI should perform.</li>");
        if (getFieldValue("toggleExamples") && DOMElements.examplesContainer && DOMElements.examplesContainer.children.length === 0)
          messages.push("<li>Consider adding 1-3 <strong>Few-Shot Examples</strong> for complex tasks or specific output styles.</li>");
        if (getFieldValue("toggleConstraints") && getFieldValue("aiProhibitions") === "")
          messages.push("<li>Clearly state any <strong>Absolute Prohibitions</strong> to ensure safe and expected behavior.</li>");


        if (messages.length > 0) {
          DOMElements.advisorMessages.innerHTML = messages.join("");
          DOMElements.advisorPanel.classList.remove("d-none");
        }
      }

      if (DOMElements.promptTemplate)
        DOMElements.promptTemplate.addEventListener("change", (e) => loadTemplate(e.target.value));

      document.querySelectorAll(".section-toggle").forEach((toggle) => {
        const contentArea = toggle.closest(".accordion-item").querySelector(".accordion-collapse");
        const inputs = contentArea.querySelectorAll("input:not(.section-toggle):not([type=file]), textarea, select");

        function setInputsDisabledState(isDisabled) {
          inputs.forEach((input) => (input.disabled = isDisabled));
          if (toggle.id === "toggleExamples" && DOMElements.addExampleButton) {
            DOMElements.addExampleButton.disabled = isDisabled;
            contentArea
              .querySelectorAll(".example-pair input, .example-pair textarea, .example-pair button")
              .forEach((el) => (el.disabled = isDisabled));
          }
        }

        setInputsDisabledState(!toggle.checked);

        toggle.addEventListener("change", function () {
          setInputsDisabledState(!this.checked);
          const collapseElement = document.getElementById(contentArea.id);
          const bsCollapse = bootstrap.Collapse.getInstance(collapseElement) || new bootstrap.Collapse(collapseElement, {toggle: false});
          if (this.checked) {
            if (!collapseElement.classList.contains('show')) bsCollapse.show();
          }
          debouncedUpdateGeneratedPrompt();
        });
      });

      function addExamplePair(initialInput = "", initialOutput = "") {
        if (!DOMElements.toggleExamples || !DOMElements.toggleExamples.checked) {
          alert("Please enable the 'Few-Shot Examples' section first by checking its box.");
          return;
        }
        const exampleId = Date.now();
        const exampleDiv = document.createElement("div");
        exampleDiv.classList.add("example-pair", "mb-3", "p-2", "border", "rounded", "bg-light");
        exampleDiv.innerHTML = `<h6 class="small text-muted">Example Pair</h6><textarea class="form-control form-control-sm example-input" rows="2" placeholder="User: ...">${initialInput}</textarea><textarea class="form-control form-control-sm example-output mt-1" rows="3" placeholder="AI: ...">${initialOutput}</textarea><button type="button" class="btn btn-sm btn-outline-danger mt-2 remove-example" data-example-id="${exampleId}"><i class="bi bi-trash" aria-hidden="true"></i> Remove</button>`;

        exampleDiv.querySelectorAll('.example-input, .example-output').forEach(el => {
            el.addEventListener('input', debouncedUpdateGeneratedPrompt);
        });

        DOMElements.examplesContainer.appendChild(exampleDiv);
        exampleDiv.querySelector(".remove-example").addEventListener("click", function () {
          this.parentElement.remove();
          debouncedUpdateGeneratedPrompt();
        });
        debouncedUpdateGeneratedPrompt();
      }

      if (DOMElements.addExampleButton) DOMElements.addExampleButton.addEventListener("click", () => addExamplePair());

      ALL_FIELD_IDS.forEach(id => {
          const element = DOMElements[id];
          if (element) {
              const eventType = (element.tagName === 'SELECT' || element.type === 'checkbox') ? 'change' : 'input';
              element.addEventListener(eventType, debouncedUpdateGeneratedPrompt);
          }
      });

      if (DOMElements.copyPromptButton)
        DOMElements.copyPromptButton.addEventListener("click", function () {
          const textToCopy = DOMElements.generatedPromptOutput.textContent;
          if (navigator.clipboard && textToCopy && !textToCopy.startsWith("Your generated prompt will appear")) {
            navigator.clipboard
              .writeText(textToCopy)
              .then(() => {
                const originalText = DOMElements.copyPromptButton.innerHTML;
                DOMElements.copyPromptButton.innerHTML = '<i class="bi bi-check-lg" aria-hidden="true"></i> Copied!';
                setTimeout(() => {
                  DOMElements.copyPromptButton.innerHTML = originalText;
                }, 2000);
              })
              .catch((err) => console.error("Failed to copy: ", err));
          } else {
            const originalText = DOMElements.copyPromptButton.innerHTML;
            DOMElements.copyPromptButton.innerHTML = '<i class="bi bi-x-lg" aria-hidden="true"></i> Nothing!';
                setTimeout(() => {
                  DOMElements.copyPromptButton.innerHTML = originalText;
                }, 2000);
          }
        });

      if (DOMElements.exportConfigButton)
        DOMElements.exportConfigButton.addEventListener("click", function () {
          const config = {};
          ALL_FIELD_IDS.forEach((id) => (config[id] = getFieldValue(id)));
          document.querySelectorAll(".section-toggle").forEach((toggle) => (config[toggle.id] = toggle.checked));

          config.examples = [];
          if (DOMElements.examplesContainer) {
            DOMElements.examplesContainer.querySelectorAll(".example-pair").forEach((pair) => {
              config.examples.push({
                input: pair.querySelector(".example-input").value,
                output: pair.querySelector(".example-output").value,
              });
            });
          }
          const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(config, null, 2));
          const dl = document.createElement("a");
          dl.setAttribute("href", dataStr);
          dl.setAttribute("download", "prompt-builder-config.json");
          document.body.appendChild(dl);
          dl.click();
          dl.remove();
        });

      if (DOMElements.importConfigTrigger)
        DOMElements.importConfigTrigger.addEventListener("click", () => DOMElements.importConfigFile.click());
      if (DOMElements.importConfigFile)
        DOMElements.importConfigFile.addEventListener("change", function (event) {
          const file = event.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
              try {
                const config = JSON.parse(e.target.result);
                resetFormAndEnableAllSections();

                ALL_FIELD_IDS.forEach((id) => {
                  if (config.hasOwnProperty(id)) setFieldValue(id, config[id]);
                });
                document.querySelectorAll(".section-toggle").forEach((toggle) => {
                  if (config.hasOwnProperty(toggle.id)) {
                    toggle.checked = config[toggle.id];
                  }

                  const sectionContent = toggle.closest(".accordion-item").querySelector(".accordion-collapse");
                  const inputs = sectionContent.querySelectorAll(
                    "input:not(.section-toggle):not([type=file]), textarea, select"
                  );
                  inputs.forEach((input) => (input.disabled = !toggle.checked));
                  if (toggle.id === "toggleExamples" && DOMElements.addExampleButton)
                    DOMElements.addExampleButton.disabled = !toggle.checked;

                  const collapseElement = document.getElementById(sectionContent.id);
                  const bsCollapse = bootstrap.Collapse.getInstance(collapseElement) || new bootstrap.Collapse(collapseElement, {toggle: false});
                  if (toggle.checked) {
                      bsCollapse.show();
                  } else {
                      bsCollapse.hide();
                  }
                });

                if (DOMElements.examplesContainer) DOMElements.examplesContainer.innerHTML = "";
                if (config.examples && Array.isArray(config.examples)) {
                  config.examples.forEach((ex) => addExamplePair(ex.input, ex.output));
                }

                if (DOMElements.promptTemplate) DOMElements.promptTemplate.value = "";
                debouncedUpdateGeneratedPrompt();
                alert("Configuration loaded successfully!");
              } catch (err) {
                console.error("Error parsing/loading config:", err);
                alert("Error loading configuration file. Make sure it is a valid JSON export from this tool.");
              }
            };
            reader.readAsText(file);
            DOMElements.importConfigFile.value = "";
          }
        });

      document.addEventListener('DOMContentLoaded', () => {
          document.querySelectorAll('.accordion-collapse').forEach(function (collapseEl) {
              if (!bootstrap.Collapse.getInstance(collapseEl)) {
                  new bootstrap.Collapse(collapseEl, { toggle: false });
              }
          });
          document.querySelectorAll(".section-toggle").forEach(toggle => {
              const isChecked = toggle.checked;
              const contentArea = toggle.closest(".accordion-item").querySelector(".accordion-collapse");
              const inputs = contentArea.querySelectorAll("input:not(.section-toggle):not([type=file]), textarea, select");
              inputs.forEach(input => input.disabled = !isChecked);

              if (toggle.id === "toggleExamples" && DOMElements.addExampleButton) {
                  DOMElements.addExampleButton.disabled = !isChecked;
              }

              const collapseElement = document.getElementById(contentArea.id);
              const bsCollapse = bootstrap.Collapse.getInstance(collapseElement);
              if (isChecked) {
                  if (!collapseElement.classList.contains('show')) bsCollapse.show();
              } else {
                  if (collapseElement.classList.contains('show')) bsCollapse.hide();
              }
          });
          debouncedUpdateGeneratedPrompt();
      });
  </script>
 </body>
</html>
